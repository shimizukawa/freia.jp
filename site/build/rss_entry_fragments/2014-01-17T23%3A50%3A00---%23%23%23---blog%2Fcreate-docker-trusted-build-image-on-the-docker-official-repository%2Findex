(dp0
S'pubdate'
p1
cdatetime
datetime
p2
(S'\x07\xde\x01\x11\x172\x00\x00\x00\x00'
p3
tp4
Rp5
sS'link'
p6
Vhttp://www.freia.jp/taka/blog/create-docker-trusted-build-image-on-the-docker-official-repository/index.html
p7
sS'description'
p8
V<div id=dockertrustedimage class=section>\u000a<h1>2014/01/17 Docker\u516c\u5f0f\u30ea\u30dd\u30b8\u30c8\u30ea\u3067Trusted\u30d3\u30eb\u30c9image\u3092\u4f5c\u6210\u3059\u308b\u624b\u9806<a class=headerlink href=http://www.freia.jp/taka/blog/create-docker-trusted-build-image-on-the-docker-official-repository/index.html#dockertrustedimage title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h1>\u000a<p><a class="reference external" href=http://connpass.com/event/3703/>Python mini Hack-a-thon \u96ea\u5c71\u5408\u5bbf</a> \u306b\u6765\u3066\u307e\u3059\u3002\u73fe\u57281/17 26:50\u3002</p>\u000a<p>Docker\u3067image\u3092\u4f5c\u3063\u3066\u516c\u5f0f\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u767b\u9332\u3057\u305f\u306e\u3067\u624b\u9806\u30e1\u30e2\u3092\u66f8\u304d\u307e\u3057\u305f\u3002</p>\u000a<div id=id2 class=section>\u000a<h2>\u524d\u63d0\u6761\u4ef6<a class=headerlink href=http://www.freia.jp/taka/blog/create-docker-trusted-build-image-on-the-docker-official-repository/index.html#id2 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<ul class=simple>\u000a<li>Docker\u3092\u52d5\u304b\u3059\u74b0\u5883\u306fVagrant\u3067\u69cb\u7bc9</li>\u000a<li>Vagrant: 1.4.3</li>\u000a<li>OS: Ubuntu-12.04 LTS</li>\u000a<li>Docker: version 0.7.6, build bc3b2ec</li>\u000a</ul>\u000a</div>\u000a<div id=vagrant class=section>\u000a<h2>Vagrant\u3092\u8d77\u52d5\u3059\u308b<a class=headerlink href=http://www.freia.jp/taka/blog/create-docker-trusted-build-image-on-the-docker-official-repository/index.html#vagrant title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>Vagrantfile:</p>\u000a<div class=highlight-python><pre># -*- mode: ruby -*-\u000a# vi: set ft=ruby :\u000a\u000aVAGRANTFILE_API_VERSION = "2"\u000a\u000aVagrant.configure("2") do |config|\u000a  config.vm.box = "ubuntu-12.04-x64"\u000a  config.vm.box_url = "http://files.vagrantup.com/precise64.box"\u000a  config.vm.provision "docker"\u000aend</pre>\u000a</div>\u000a<p>vagrant up:</p>\u000a<div class=highlight-python><pre>$ vagrant up\u000aBringing machine 'default' up with 'virtualbox' provider...\u000a[default] Importing base box 'ubuntu-12.04-x64'...\u000a[default] Matching MAC address for NAT networking...\u000a[default] Setting the name of the VM...\u000a[default] Clearing any previously set forwarded ports...\u000a[default] Fixed port collision for 22 =&gt; 2222.\u000a[default] Clearing any previously set network interfaces...\u000a[default] Preparing network interfaces based on configuration...\u000a[default] Forwarding ports...\u000a[default] -- 22 =&gt; 2222 (adapter 1)\u000a[default] Booting VM...\u000a[default] Waiting for machine to boot. This may take a few minutes...\u000a[default] Machine booted and ready!\u000a[default] Mounting shared folders...\u000a[default] -- /vagrant\u000a[default] Running provisioner: docker...\u000a[default] Installing Docker (latest) onto machine...</pre>\u000a</div>\u000a</div>\u000a<div id=dockerfile class=section>\u000a<h2>Dockerfile\u3092\u7528\u610f\u3059\u308b<a class=headerlink href=http://www.freia.jp/taka/blog/create-docker-trusted-build-image-on-the-docker-official-repository/index.html#dockerfile title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>Vagrantfile\u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bDcokerfile\u3092\u7528\u610f\u3057\u307e\u3059\u3002</p>\u000a<p>Dockerfile:</p>\u000a<div class=highlight-python><pre># Ubuntu 12.04 LTS and Python 2.4, 2.5, 2.6, 2.7, 3.1, 3.2, 3.3, pypy\u000aFROM ubuntu:12.04\u000aMAINTAINER Takayuki SHIMIZUKAWA "shimizukawa@gmail.com"\u000aRUN apt-get install -qq -y python-software-properties\u000aRUN add-apt-repository ppa:fkrull/deadsnakes\u000aRUN add-apt-repository ppa:pypy/ppa\u000aRUN apt-get update\u000aRUN apt-get install -qq -y \u005c\u000a    python2.4 \u005c\u000a    python2.5 \u005c\u000a    python2.6 \u005c\u000a    python2.7 \u005c\u000a    python3.1 \u005c\u000a    python3.2 \u005c\u000a    python3.3 \u005c\u000a    pypy</pre>\u000a</div>\u000a</div>\u000a<div id=docker class=section>\u000a<h2>Docker\u30a4\u30e1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b<a class=headerlink href=http://www.freia.jp/taka/blog/create-docker-trusted-build-image-on-the-docker-official-repository/index.html#docker title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>VM\u74b0\u5883\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066docker build\u3057\u307e\u3059\u3002</p>\u000a<p><tt class="docutils literal"><span class=pre>/vagrant/</span></tt> \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30ed\u30b0\u30a4\u30f3\u524d\u306eVagrantfile\u3068Dockerfile\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3044\u308b\u306e\u3067\u3001/vagrant/ \u3067\u5b9f\u884c\u3057\u307e\u3059\u3002</p>\u000a<p>\u30d3\u30eb\u30c9\u3059\u308b\u3068\u304d\u306b\u4efb\u610f\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u3044\u3066\u3001\u3042\u3068\u3067ID\u3067\u306f\u306a\u304f\u540d\u524d\u3067\u6271\u3048\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u000a\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306b\u306f <tt class="docutils literal"><span class=pre>\u30e6\u30fc\u30b6\u30fc\u540d/\u30ea\u30dd\u30b8\u30c8\u30ea\u540d</span></tt> \u306e\u66f8\u5f0f\u3067\u597d\u304d\u306a\u540d\u524d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u3068\u308a\u3042\u3048\u305a\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u7701\u7565\u3057\u3066 <tt class="docutils literal"><span class=pre>python-all</span></tt> \u3068\u3044\u3046\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002</p>\u000a<p>docker build:</p>\u000a<div class=highlight-python><pre>$ vagrant ssh\u000avagrant@precise64:~$ cd /vagrant/\u000avagrant@precise64:/vagrant$ sudo docker build -t python-all .\u000aUploading context 81.92 kB\u000aUploading context\u000aStep 1 : FROM ubuntu:12.04\u000aPulling repository ubuntu\u000a8dbd9e392a96: Pulling image (12.04) from ubuntu, endpoint: https://cdn-registry-8dbd9e392a96: Download complete\u000a ---&gt; 8dbd9e392a96\u000aStep 2 : MAINTAINER Takayuki SHIMIZUKAWA "shimizukawa@gmail.com"\u000a ---&gt; Running in 661cd7d9d425\u000a ---&gt; ef6acb3727da\u000aStep 3 : RUN apt-get install -qq -y python-software-properties\u000a ---&gt; Running in ef86eede816b\u000a ---&gt; d161837ff918\u000aStep 4 : RUN add-apt-repository ppa:fkrull/deadsnakes\u000a ---&gt; Running in 5d733ed86ac0\u000a ---&gt; 23219187c053\u000aStep 5 : RUN add-apt-repository ppa:pypy/ppa\u000a ---&gt; Running in a2db781064c8\u000a ---&gt; 7a703485a57a\u000aStep 6 : RUN apt-get update\u000a ---&gt; Running in b9e3664bb265\u000a ---&gt; fdf62b5cbfd8\u000aStep 7 : RUN apt-get install -qq -y    python2.4    python2.5    python2.6    python2.7    python3.1    python3.2    python3.3    pypy\u000a ---&gt; Running in c16bd95ffe23\u000a ---&gt; 584371a86c76\u000aSuccessfully built 584371a86c76</pre>\u000a</div>\u000a<p>(\u9577\u3044\u306e\u3067\u3060\u3044\u3076\u7701\u7565\u3057\u307e\u3057\u305f)</p>\u000a<p>\u3053\u308c\u3067Python-2.4\u304b\u30893.3\u307e\u3067\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30a4\u30e1\u30fc\u30b8 <tt class="docutils literal"><span class=pre>584371a86c76</span></tt> \u304c\u3067\u304d\u3042\u304c\u308a\u307e\u3057\u305f\u3002</p>\u000a<p>docker images:</p>\u000a<div class=highlight-python><pre>vagrant@precise64:/vagrant$ docker images\u000aREPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\u000apython-all          latest              584371a86c76        57 seconds ago      450.9 MB\u000a&lt;none&gt;              &lt;none&gt;              67de15d531a5        3 hours ago         223.7 MB\u000aubuntu              12.04               8dbd9e392a96        9 months ago        128 MB</pre>\u000a</div>\u000a<p><tt class="docutils literal"><span class=pre>python-all</span></tt> \u3092\u4f7f\u3063\u3066\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002</p>\u000a<p>docker run:</p>\u000a<div class=highlight-python><pre>vagrant@precise64:/vagrant$ docker run -t -i python-all /bin/bash\u000aroot@e94fcf40e739:/# compgen -c python\u000apython3.3\u000apython3.1\u000apython3.3m\u000apython3.2mu\u000apython3.2\u000apython2.6\u000apython2.4\u000apython2.5\u000apython2\u000apython2.7\u000apython</pre>\u000a</div>\u000a<p>\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u307e\u3057\u305f\u3002\u8d77\u52d5\u3068\u304b\u78ba\u8a8d\u3057\u3066\u5927\u4e08\u592b\u305d\u3046\u306a\u3089Dockerfile\u306e\u5185\u5bb9\u306fOK\u3067\u3057\u3087\u3046\u3002</p>\u000a</div>\u000a<div id=github class=section>\u000a<h2>github\u306b\u767b\u9332\u3059\u308b<a class=headerlink href=http://www.freia.jp/taka/blog/create-docker-trusted-build-image-on-the-docker-official-repository/index.html#github title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>index.docker.io\u306bTrusted\u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3066\u767b\u9332\u3059\u308b\u306b\u306f\u3001Dockerfile\u3092\u542b\u3080\u30ea\u30dd\u30b8\u30c8\u30ea\u3092github\u3067\u516c\u958b\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u4f5c\u6210\u3057\u305fVagrantfile\u3068Dockerfile\u3092docker-python-all\u3068\u3044\u3046\u540d\u524d\u3067\u767b\u9332\u3057\u307e\u3057\u305f\u3002</p>\u000a<p>\u3068\u308a\u3042\u3048\u305agithub\u306bdocker-python-all\u3068\u3044\u3046\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u6210\u3002</p>\u000a<p>Vagrant\u306e\u6bcd\u8266\u306e\u65b9\u3067git\u306b\u30b3\u30df\u30c3\u30c8\u3057\u3066github\u306bpush\u3057\u307e\u3059:</p>\u000a<div class=highlight-python><pre>$ git init\u000a$ git add Vagrantfile Dockerfile\u000a$ git commit -m "initial"\u000a$ git remote add origin https://github.com/shimizukawa/docker-python-all.git\u000a$ git push origin master</pre>\u000a</div>\u000a</div>\u000a<div id=index-docker-io class=section>\u000a<h2>index.docker.io \u3067\u30d3\u30eb\u30c9\u3059\u308b<a class=headerlink href=http://www.freia.jp/taka/blog/create-docker-trusted-build-image-on-the-docker-official-repository/index.html#index-docker-io title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p><a class="reference external" href=http://docs.docker.io/en/latest/use/workingwithrepository/#to-setup-a-trusted-build>Share Images via Repositories</a> \u306b\u66f8\u3044\u3066\u6709\u308b\u3068\u304a\u308a\u3067\u3059\u3002</p>\u000a<ol class="arabic simple">\u000a<li><a class="reference external" href=https://index.docker.io/>Docker Index account</a> \u3092\u4f5c\u6210\u3057\u3066\u30ed\u30b0\u30a4\u30f3</li>\u000a<li>\u30a2\u30ab\u30a6\u30f3\u30c8\u30e1\u30cb\u30e5\u30fc\u3067GitHub\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u95a2\u9023\u3065\u3051\u308b</li>\u000a<li><a class="reference external" href=https://index.docker.io/builds/>Trusted builds</a> \u30da\u30fc\u30b8\u3067\u3000Add New \u3057\u3066\u8a2d\u5b9a\u753b\u9762\u3078</li>\u000a<li>\u5bfe\u8c61\u306eGitHub\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u9078\u3076(\u3053\u306e\u4f8b\u3067\u306fshimizukawa/docker-python-all)</li>\u000a<li>Default Branch\u3092master\u3092\u5165\u529b(\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3067\u3059)</li>\u000a<li>Repo Name\u306bDocker\u3067\u4f7f\u3046\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u3092\u5165\u529b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306fGitHub\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u540ddocker-python-all\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u308b\u304c\u3001 <tt class="docutils literal"><span class=pre>shimizukawa/python-bulid</span></tt> \u306b\u3057\u305f\u3044\u306e\u3067\u3061\u3087\u3063\u3068\u66f8\u304d\u63db\u3048\u308b\u3002</li>\u000a<li>Docker Tag Name \u306flatest\u306e\u307e\u307e\u3002</li>\u000a<li>Dockerfile Location \u306f\u3055\u304d\u307b\u3069git\u30ea\u30dd\u30b8\u30c8\u30ea\u306e / \u306b\u4fdd\u5b58\u3057\u305f\u306e\u3067 / \u306e\u307e\u307e\u3002</li>\u000a</ol>\u000a<div class=figure>\u000a<img alt=../../_images/dockerio.png src=http://www.freia.jp/taka/_images/dockerio.png>\u000a<p class=caption><a class="reference external" href=https://index.docker.io/builds/>Trusted builds</a> \u8a2d\u5b9a\u753b\u9762</p>\u000a</div>\u000a<p>\u8a2d\u5b9a\u304c\u7d42\u308f\u308b\u3068\u30b5\u30fc\u30d0\u30fc\u306e\u30ea\u30bd\u30fc\u30b9\u304c\u7a7a\u304d\u6b21\u7b2c\u3001docker build\u304c\u5b9f\u884c\u3055\u308c\u3066image\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002</p>\u000a<div class=figure>\u000a<img alt=../../_images/docker-builds.png src=http://www.freia.jp/taka/_images/docker-builds.png>\u000a<p class=caption><a class="reference external" href=https://index.docker.io/builds/>Trusted builds</a> \u30b9\u30c6\u30fc\u30bf\u30b9\u753b\u9762</p>\u000a</div>\u000a<p>\u30d3\u30eb\u30c9\u3092\u5f85\u3063\u3066\u308b\u9593\u306bimage\u306e\u8aac\u660e\u6587\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u4e0a\u8a18\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u753b\u9762\u3067 <tt class="docutils literal"><span class=pre>Docker</span> <span class=pre>Repo</span></tt> \u306b\u3042\u308b\u30ea\u30f3\u30af\u304b\u3089 <a class="reference external" href=https://index.docker.io/u/shimizukawa/python-all/>shimizukawa/python-all</a> \u306b\u9077\u79fb\u3057\u3066Settings\u30bf\u30d6\u3067Description\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u3053\u308c\u306f\u3042\u3068\u3067 docker search \u3057\u305f\u3068\u304d\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002</p>\u000a<div class=figure>\u000a<img alt=../../_images/docker-shimizukawa-python-all.png src=http://www.freia.jp/taka/_images/docker-shimizukawa-python-all.png>\u000a<p class=caption><a class="reference external" href=https://index.docker.io/u/shimizukawa/python-all/>shimizukawa/python-all</a> \u753b\u9762</p>\u000a</div>\u000a<p>\u3057\u3070\u3089\u304f\u3057\u3066 <a class="reference external" href=https://index.docker.io/builds/>Trusted builds</a> \u30b9\u30c6\u30fc\u30bf\u30b9\u753b\u9762\u3067Status\u304cDone\u306b\u306a\u308c\u3070\u5b8c\u4e86\u3002</p>\u000a</div>\u000a<div id=docker-search-docker-pull class=section>\u000a<h2>docker search \u3068 docker pull<a class=headerlink href=http://www.freia.jp/taka/blog/create-docker-trusted-build-image-on-the-docker-official-repository/index.html#docker-search-docker-pull title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>Vagrant\u74b0\u5883\u3067\u3001docker\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u691c\u7d22\u3057\u3066\u307f\u307e\u3059\u3002</p>\u000a<p>docker search:</p>\u000a<div class=highlight-python><pre>$ vagrant ssh\u000avagrant@precise64:/vagrant$ docker search python-all\u000aNAME                     DESCRIPTION                                     STARS     OFFICIAL   TRUSTED\u000ashimizukawa/python-all   Ubuntu 12.04 LTS and Python 2.4, 2.5, 2.6,...   0                    [OK]</pre>\u000a</div>\u000a<p>\u306f\u3044\u3002TRUSTED\u3001OK\u3002</p>\u000a<p>docker pull\u3057\u3066\u4f7f\u3044\u307e\u3059:</p>\u000a<div class=highlight-python><pre>vagrant@precise64:/vagrant$ docker pull shimizukawa/python-all\u000aPulling repository shimizukawa/python-all\u000add6848c8a762: Pulling dependent layers\u000a8dbd9e392a96: Download complete\u000adfd192db4c11: Download complete\u000a2064c6fb055e: Download complete\u000a...</pre>\u000a</div>\u000a<p>docker run:</p>\u000a<div class=highlight-python><pre>vagrant@precise64:/vagrant$ docker run -t -i shimizukawa/python-all /bin/bash\u000aroot@e94fcf40e739:/# compgen -c python\u000apython3.3\u000apython3.1\u000apython3.3m\u000apython3.2mu\u000apython3.2\u000apython2.6\u000apython2.4\u000apython2.5\u000apython2\u000apython2.7\u000apython</pre>\u000a</div>\u000a<p>\u554f\u984c\u306a\u3055\u305d\u3046\u3002</p>\u000a<p>\u4ed6\u306eDockerfile\u3092\u4f5c\u308b\u6642\u306b <tt class="docutils literal"><span class=pre>FROM</span> <span class=pre>shimizukawa/python-all</span></tt> \u3068\u3059\u308c\u3070\u3001\u3053\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u5143\u306b\u74b0\u5883\u3092\u4f5c\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u306e\u3067\u4fbf\u5229\u3002</p>\u000a</div>\u000a</div>\u000a
p9
sS'unique_id'
p10
g7
sS'title'
p11
V2014/01/17 Docker\u516c\u5f0f\u30ea\u30dd\u30b8\u30c8\u30ea\u3067Trusted\u30d3\u30eb\u30c9image\u3092\u4f5c\u6210\u3059\u308b\u624b\u9806
p12
s.