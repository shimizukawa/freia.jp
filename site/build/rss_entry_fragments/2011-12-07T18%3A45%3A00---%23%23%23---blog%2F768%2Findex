(dp0
S'pubdate'
p1
cdatetime
datetime
p2
(S'\x07\xdb\x0c\x07\x12-\x00\x00\x00\x00'
p3
tp4
Rp5
sS'link'
p6
Vhttp://www.freia.jp/taka/blog/768/index.html
p7
sS'description'
p8
V<div id=python3 class=section>\u000a<h1>2011/12/07 \u30e9\u30a4\u30d6\u30e9\u30ea\u3092Python3\u5bfe\u5fdc\u306b\u66f8\u304d\u63db\u3048\u308b<a class=headerlink href=http://www.freia.jp/taka/blog/768/index.html#python3 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h1>\u000a<p>Python-3.3\u304c\u6765\u5e74\u4e2d\u76e4\u306b\u30ea\u30ea\u30fc\u30b9\u4e88\u5b9a\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u305d\u308d\u305d\u308d\u81ea\u4f5c\u30e9\u30a4\u30d6\u30e9\u30ea\u3092Python2/3\u4e21\u5bfe\u5fdc\u3057\u3066\u3044\u304b\u306a\u3044\u3068\u306a\u3042\u3001\u3068\u601d\u3044\u3064\u3064\u3053\u3053\u534a\u5e74\u307b\u3069\u3044\u308d\u3044\u308d\u3042\u3063\u3066\u624b\u304c\u56de\u3063\u3066\u3044\u307e\u305b\u3093\u3002\u7d50\u5a5a\u5f0f\u30ec\u30dd\u30fc\u30c8\u3082\u5168\u7136\u66f8\u3051\u3066\u307e\u305b\u3093\u3002</p>\u000a<p>\u3068\u3044\u3046\u3053\u3068\u3067\u3001 <a class="reference external" href=https://connpass.com/event/142/>2011 Python\u30a2\u30c9\u30d9\u30f3\u30c8\u30ab\u30ec\u30f3\u30c0\u30fc(Python3)</a> 7\u65e5\u76ee\u62c5\u5f53\u306e\u3001\u4e2d\u795e\u3055\u3093\u306b <cite>\u65b0\u5a5a\u3067\u5e78\u305b\u3044\u3063\u3071\u3044\u306e @shimizukawa</cite> \u3068\u7d39\u4ecb\u3055\u308c\u305f\u6e05\u6c34\u5ddd\u3067\u3059\u3002</p>\u000a<div id=id1 class=section>\u000a<h2>\u524d\u63d0\u6761\u4ef6<a class=headerlink href=http://www.freia.jp/taka/blog/768/index.html#id1 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>\u4ee5\u524d\u4f5c\u6210\u3057\u305f <a class="reference external" href=http://pypi.python.org/pypi/zip_open/0.2.0>zip_open</a> \u30e9\u30a4\u30d6\u30e9\u30ea\u3092Python3\u5bfe\u5fdc\u306b\u66f8\u304d\u63db\u3048\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u53ef\u80fd\u306a\u7b87\u6240\u306f2.7\u3067\u3082\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u6c17\u3092\u3064\u3051\u3066\u8a18\u8ff0\u3057\u307e\u3059\u3002\u000a\u4eca\u56de\u4f7f\u7528\u3057\u305f\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002</p>\u000a<table frame=void class="docutils field-list" rules=none>\u000a<col class=field-name>\u000a<col class=field-body>\u000a<tbody valign=top>\u000a<tr class="field-odd field"><th class=field-name>Python:<td class=field-body>2.7.2, 3.2.2</td>\u000a</tr>\u000a<tr class="field-even field"><th class=field-name>OS:<td class=field-body>Windows7 64bit, Mac OS X (Lion)</td>\u000a</tr>\u000a<tr class="field-odd field"><th class=field-name>\u5bfe\u8c61:<td class=field-body>zip_open 0.2.0</td>\u000a</tr>\u000a</tbody>\u000a</table>\u000a<p>zip_open\u306fREADME.txt\u3067doctest\u3092\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u3001\u307e\u305a\u3053\u308c\u304cPython2.7\u3067\u52d5\u4f5c\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059:</p>\u000a<div class=highlight-python><pre>$ hg clone https://bitbucket.org/shimizukawa/zip_open\u000a$ cd zip_open\u000a$ python2.7 setup.py test\u000a\u000arunning test\u000arunning egg_info\u000awriting zip_open.egg-info/PKG-INFO\u000awriting top-level names to zip_open.egg-info/top_level.txt\u000awriting dependency_links to zip_open.egg-info/dependency_links.txt\u000areading manifest file 'zip_open.egg-info/SOURCES.txt'\u000areading manifest template 'MANIFEST.in'\u000awarning: no files found matching '*.py' under directory 'src'\u000awriting manifest file 'zip_open.egg-info/SOURCES.txt'\u000arunning build_ext\u000a/Users/shimizukawa/zip_open/tests/../README.txt\u000aDoctest: README.txt ... ok\u000a\u000a----------------------------------------------------------------------\u000aRan 1 test in 0.015s\u000a\u000aOK\u000a$</pre>\u000a</div>\u000a<p>\u3053\u308c\u3092Python3\u3067\u540c\u3058\u3088\u3046\u306b\u5b9f\u884c\u3057\u3066\u3001\u3059\u3079\u3066\u306e\u30a8\u30e9\u30fc\u3092step by step\u3067\u4fee\u6b63\u3057\u3066\u3044\u3053\u3046\u3001\u3068\u3044\u3046\u306e\u304c\u4eca\u56de\u306e\u8a18\u4e8b\u306e\u8da3\u65e8\u3067\u3059\u3002</p>\u000a<p>\u306a\u304a\u30012to3\u3092\u7528\u3044\u3066\u3001Python2/3\u4e21\u5bfe\u5fdc\u3067\u306f\u306a\u304f\u30012-&gt;3\u81ea\u52d5\u5909\u63db\u306b\u3088\u3063\u3066Python3\u5bfe\u5fdc\u3059\u308b\u65b9\u6cd5\u3082\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p>\u000a<ul class=simple>\u000a<li><a class="reference external" href=http://d.hatena.ne.jp/ymotongpoo/20110406/1302061408>Python 2\u304b\u3089Python 3\u3078\u306e\u79fb\u884c - YAMAGUCHI::weblog</a></li>\u000a</ul>\u000a<ul class=simple>\u000a<li><a class="reference external" href=http://www.freia.jp/taka/blog/753>pyreadline \u30922to3\u3067Python2/3\u4e21\u5bfe\u5fdc\u306b\u3059\u308b\u30e1\u30e2 - \u6e05\u6c34\u5dddWeb</a></li>\u000a</ul>\u000a<ul class=simple>\u000a<li><a class="reference external" href=http://www.freia.jp/taka/blog/755>bucho\u30922to3\u3067Python2/3\u4e21\u5bfe\u5fdc\u306b\u3059\u308b\u30e1\u30e2 - \u6e05\u6c34\u5dddWeb</a></li>\u000a</ul>\u000a<p>\u4ed6\u306b\u3082\u4ee5\u4e0b\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3082\u898b\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002</p>\u000a<ul class=simple>\u000a<li><a class="reference external" href=http://docs.python.org/dev/howto/pyporting.html>Porting Python 2 Code to Python 3 - Python v3.3a0 documentation</a></li>\u000a</ul>\u000a<ul class=simple>\u000a<li><a class="reference external" href=http://packages.python.org/six/>Six: Python 2 and 3 Compatibility Library - six 1.1.0 documentation</a></li>\u000a</ul>\u000a</div>\u000a<div id=id7 class=section>\u000a<h2>Python3\u306e\u9806\u6b21\u5bfe\u5fdc<a class=headerlink href=http://www.freia.jp/taka/blog/768/index.html#id7 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<div id=import class=section>\u000a<h3>import\u95a2\u9023\u306e\u8abf\u6574<a class=headerlink href=http://www.freia.jp/taka/blog/768/index.html#import title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h3>\u000a<p>-S\u30aa\u30d7\u30b7\u30e7\u30f3\u4ed8\u304d\u3067Python3\u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002-S\u306fPython\u8d77\u52d5\u6642\u306bimport site\u3057\u306a\u3044(site-packages\u306a\u3069\u3092\u5229\u7528\u3057\u306a\u3044)\u30e2\u30fc\u30c9\u3067\u3059:</p>\u000a<div class=highlight-python><pre>$ python3.2 -S setup.py test\u000aTraceback (most recent call last):\u000a  File "setup.py", line 2, in &lt;module&gt;\u000a    from setuptools import setup, find_packages\u000aImportError: No module named setuptools</pre>\u000a</div>\u000a<p>\u307e\u305a\u306fsetuptools\u304c\u7121\u3044\u3068\u3044\u308f\u308c\u307e\u3057\u305f\u3002\u30a2\u30c9\u30d9\u30f3\u30c8\u30ab\u30ec\u30f3\u30c0\u30fc\u306erudi\u3055\u3093\u306e\u8a18\u4e8b <a class="reference external" href=http://d.hatena.ne.jp/rudi/20111204/1323003603>pysetup3\u306e\u3054\u7d39\u4ecb</a> \u3067\u3082\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u3001Python3.3\u304b\u3089\u306fpackaging\u304c\u540c\u68b1\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u305f\u3081\u3001setuptools (Distribute)\u304c\u5fc5\u9808\u3068\u3044\u3046\u30c7\u30d5\u30a1\u30af\u30c8\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9\u306a\u4f5c\u6cd5\u306f\u5909\u308f\u3063\u3066\u3044\u304f\u3068\u601d\u308f\u308c\u307e\u3059\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f:</p>\u000a<div class=highlight-python><pre>diff -r 967faaa489bd setup.py\u000a--- a/setup.py  Tue Nov 29 15:50:49 2011 +0900\u000a+++ b/setup.py  Wed Dec 07 00:28:04 2011 +0900\u000a@@ -1,6 +1,9 @@\u000a # -*- coding: utf-8 -*-\u000a-from setuptools import setup\u000a import os\u000a+try:\u000a+    from setuptools import setup\u000a+except ImportError:\u000a+    from distutils import setup</pre>\u000a</div>\u000a<p>\u518d\u5ea6\u5b9f\u884c:</p>\u000a<div class=highlight-python><pre>$ python3.2 setup.py  test\u000a...\u000aerror: invalid command 'test'\u000a$</pre>\u000a</div>\u000a<p>setup.py \u306e test \u30b3\u30de\u30f3\u30c9\u306fsetuptools\u306e\u62e1\u5f35\u6a5f\u80fd\u3067\u3057\u305f\u306d\u2025\u3002\u000a\u3067\u306ftests\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306etest_zip_open.py\u3092\u76f4\u63a5\u5b9f\u884c\u3057\u307e\u3059\u3002</p>\u000a<div class=highlight-python><pre>$ python3.2 tests/test_zip_open.py\u000a...</pre>\u000a</div>\u000a<p>\u5927\u91cf\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3057\u305f\uff08\u591a\u3059\u304e\u308b\u306e\u3067\u63b2\u8f09\u306f\u3057\u307e\u305b\u3093\uff09\u3002DocTest\u306e\u5834\u5408\u3001\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3082\u30c6\u30b9\u30c8\u3092\u6b62\u3081\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3001\u5909\u6570\u4ee3\u5165\u3067\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u5f8c\u306e\u65b9\u3067\u672a\u5b9a\u7fa9\u306e\u5909\u6570\u30a2\u30af\u30bb\u30b9\u306e\u30a8\u30e9\u30fc\u304c\u9023\u9396\u7684\u306b\u767a\u751f\u3057\u305f\u308a\u3057\u307e\u3059\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u5148\u982d\u304b\u3089\u9806\u306b\u89e3\u6c7a\u3057\u3066\u884c\u3051\u3070\u305d\u308c\u307b\u3069\u5927\u91cf\u306b\u4fee\u6b63\u305b\u305a\u306b\u3059\u3080\u30fb\u30fb\u306f\u305a\u3002</p>\u000a<p>\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u5148\u982d\u304b\u3089\u9806\u756a\u306bPython3\u5bfe\u5fdc(\u51fa\u6765\u308c\u3070Python2/3\u4e21\u5bfe\u5fdc)\u306b\u66f8\u304d\u63db\u3048\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002</p>\u000a</div>\u000a<div id=stringio-io-bytesio class=section>\u000a<h3>StringIO -&gt; io.BytesIO<a class=headerlink href=http://www.freia.jp/taka/blog/768/index.html#stringio-io-bytesio title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h3>\u000a<div class=highlight-python><pre>----------------------------------------------------------------------\u000aFile "tests/../README.txt", line 35, in README.txt\u000aFailed example:\u000a    from zip_open import zopen\u000aException raised:\u000a    Traceback (most recent call last):\u000a      File "zip_open.py", line 5, in &lt;module&gt;\u000a        from cStringIO import StringIO\u000a    ImportError: No module named cStringIO</pre>\u000a</div>\u000a<p>StringIO\u306fio\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u79fb\u52d5\u3057\u307e\u3057\u305f\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059:</p>\u000a<div class=highlight-python><pre>diff a/zip_open.py b/zip_open.py\u000a--- a/zip_open.py\u000a+++ b/zip_open.py\u000a@@ -1,10 +1,7 @@\u000a import os\u000a from zipimport import zipimporter\u000a from zipfile import ZipFile\u000a-try:\u000a-    from cStringIO import StringIO\u000a-except:\u000a-    from StringIO import StringIO\u000a+import io\u000a\u000a __version__ = '0.2.0'\u000a __all__ = ['zopen', 'zip_open']\u000a@@ -46,7 +43,7 @@\u000a                       os.path.join(zipobj.filename, subpath))\u000a\u000a     prefix = prefixes[0] # select first file\u000a-    fileobj = StringIO(zipobj.read(prefix))\u000a+    fileobj = io.BytesIO(zipobj.read(prefix))\u000a     new_subpath = subpath[len(prefix):]\u000a\u000a     if new_subpath:</pre>\u000a</div>\u000a</div>\u000a<div id=basestring-str class=section>\u000a<h3>basestring -&gt; str<a class=headerlink href=http://www.freia.jp/taka/blog/768/index.html#basestring-str title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h3>\u000a<div class=highlight-python><pre>----------------------------------------------------------------------\u000aFile "tests/../README.txt", line 35, in README.txt\u000aFailed example:\u000a    fobj = zopen('packages1.zip/file1.txt')\u000aException raised:\u000a    Traceback (most recent call last):\u000a      File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/doctest.py", line 1253, in __run\u000a        compileflags, 1), test.globs)\u000a      File "&lt;doctest README.txt[1]&gt;", line 1, in &lt;module&gt;\u000a        fobj = zopen('packages1.zip/file1.txt')\u000a      File "/Users/shimizukawa/zip_open/tests/../zip_open.py", line 10, in zopen\u000a        if isinstance(path_or_fobj, basestring):\u000a    NameError: global name 'basestring' is not defined</pre>\u000a</div>\u000a<p>basestring \u306f\u7121\u304f\u306a\u308a\u3001str\u3068bytes\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u000a\u3053\u3053\u3067\u306fpath\u6587\u5b57\u5217\u3092\u6271\u3063\u3066\u3044\u308b\u306e\u3067bytes\u3067\u306f\u306a\u304fstr\u306b\u5909\u66f4\u3057\u307e\u3059:</p>\u000a<div class=highlight-python><pre>diff a/zip_open.py b/zip_open.py\u000a--- a/zip_open.py\u000a+++ b/zip_open.py\u000a@@ -11,16 +11,13 @@\u000a __all__ = ['zopen', 'zip_open']\u000a\u000a def zopen(path_or_fobj, subpath=''):\u000a-    if isinstance(path_or_fobj, basestring):\u000a+    if isinstance(path_or_fobj, str):\u000a         path = os.path.join(path_or_fobj, subpath)\u000a         if os.path.exists(path):\u000a             return open(path, 'rb')</pre>\u000a</div>\u000a<p>Python2/3\u4e21\u5bfe\u5fdc\u306b\u3059\u308b\u306b\u306fPython2\u306eunicode\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u8003\u616e\u304b\u3089\u6f0f\u308c\u3066\u3044\u307e\u3059\u306d\u3002\u3053\u306e\u3078\u3093\u306f\u3001\u3042\u3068\u3067\u3061\u3083\u3093\u3068\u5b9f\u88c5\u3057\u3088\u3046\u3068\u304a\u3082\u3044\u307e\u3059\u3002zip_open\u30d1\u30c3\u30b1\u30fc\u30b8\u306funicode\uff08\u65e5\u672c\u8a9e\uff09\u306e\u6271\u3044\u304c\u7518\u3044\u3067\u3059\u306d\uff01orz</p>\u000a</div>\u000a<div id=filterlistgenerator class=section>\u000a<h3>filter\u304clist\u3067\u306f\u306a\u304fgenerator\u3092\u8fd4\u3059<a class=headerlink href=http://www.freia.jp/taka/blog/768/index.html#filterlistgenerator title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h3>\u000a<div class=highlight-python><pre>File "tests/../README.txt", line 35, in README.txt\u000aFailed example:\u000a    fobj = zopen('packages1.zip/file1.txt')\u000aException raised:\u000a    Traceback (most recent call last):\u000a      File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/doctest.py", line 1253, in __run\u000a        compileflags, 1), test.globs)\u000a      File "&lt;doctest README.txt[1]&gt;", line 1, in &lt;module&gt;\u000a        fobj = zopen('packages1.zip/file1.txt')\u000a      File "/Users/shimizukawa/zip_open/tests/../zip_open.py", line 18, in zopen\u000a        return zip_open(zipobj, path)\u000a      File "/Users/shimizukawa/zip_open/tests/../zip_open.py", line 45, in zip_open\u000a        prefix = prefixes[0] # select first file\u000a    TypeError: 'filter' object is not subscriptable</pre>\u000a</div>\u000a<p>filter()\u306e\u7d50\u679c\u304cgenerator\u306b\u306a\u308a\u307e\u3057\u305f(\u4ed6\u306b\u3082Python2\u3067\u306flist\u3092\u8fd4\u3057\u3066\u3044\u3066\u305f\u8272\u3005\u306a\u95a2\u6570\u304cPython3\u3067\u306fgenerator\u3092\u8fd4\u3059\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059)\u3002\u306a\u306e\u3067\u3001prefixes[0]\u3068\u3044\u3046\u66f8\u304d\u65b9\u304c\u51fa\u6765\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\u3053\u3053\u3067\u306f\u6700\u521d\u306e1\u500b\u304c\u53d6\u308a\u51fa\u305b\u308c\u3070\u3044\u3044\u306e\u3067next(prefixes)\u306b\u5909\u66f4\u3057\u307e\u3059\u3002</p>\u000a<div class=highlight-python><pre>diff a/zip_open.py b/zip_open.py\u000a--- a/zip_open.py\u000a+++ b/zip_open.py\u000a@@ -41,12 +38,13 @@\u000a     subpath = subpath.replace(os.path.sep, '/').strip('/')\u000a     prefixes = filter(path_finder(subpath), zipobj.namelist())\u000a\u000a-    if not prefixes:\u000a+    try:\u000a+        prefix = next(prefixes)  # select first file\u000a+    except StopIteration:\u000a         raise IOError(2, 'No such file or directory',\u000a                       os.path.join(zipobj.filename, subpath))\u000a\u000a-    prefix = prefixes[0] # select first file\u000a     fileobj = io.BytesIO(zipobj.read(prefix))\u000a     new_subpath = subpath[len(prefix):]</pre>\u000a</div>\u000a</div>\u000a<div id=print class=section>\u000a<h3>print\u306f\u95a2\u6570\u306b\u5909\u66f4<a class=headerlink href=http://www.freia.jp/taka/blog/768/index.html#print title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h3>\u000a<p>\u6b21\u306f <cite>print data</cite> \u304c\u5927\u91cf\u306b\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002Python3\u304b\u3089print\u306f\u95a2\u6570\u306b\u306a\u308a\u307e\u3057\u305f\u3002</p>\u000a<div class=highlight-python><pre>----------------------------------------------------------------------\u000aFile "tests/../README.txt", line 37, in README.txt\u000aFailed example:\u000a    print data\u000aException raised:\u000a    Traceback (most recent call last):\u000a      File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/doctest.py", line 1253, in __run\u000a        compileflags, 1), test.globs)\u000a      File "&lt;doctest README.txt[3]&gt;", line 1\u000a        print data\u000a                 ^\u000a    SyntaxError: invalid syntax</pre>\u000a</div>\u000a<p>\u6570\u304c\u591a\u3044\u306e\u3067\u5168\u90e8\u306f\u66f8\u304d\u307e\u305b\u3093\u304c\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f:</p>\u000a<div class=highlight-python><pre>diff a/README.txt b/README.txt\u000a--- a/README.txt\u000a+++ b/README.txt\u000a@@ -34,13 +34,13 @@\u000a    &gt;&gt;&gt; from zip_open import zopen\u000a    &gt;&gt;&gt; fobj = zopen('packages1.zip/file1.txt')\u000a    &gt;&gt;&gt; data = fobj.read()\u000a-   &gt;&gt;&gt; print data\u000a+   &gt;&gt;&gt; print(data)\u000a    I am file1.txt, ok.</pre>\u000a</div>\u000a<p>\u518d\u5ea6\u5b9f\u884c\u3059\u308b\u3068\u30fb\u30fb\u30fb\u307e\u3060\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059:</p>\u000a<div class=highlight-python><pre>----------------------------------------------------------------------\u000aFile "tests/../README.txt", line 37, in README.txt\u000aFailed example:\u000a    print(data)\u000aExpected:\u000a    I am file1.txt, ok.\u000aGot:\u000a    b'I am file1.txt, ok.\u005cr\u005cn'</pre>\u000a</div>\u000a<p>\u306a\u308b\u307b\u3069\u3001zopen\u3067\u958b\u304f\u30d5\u30a1\u30a4\u30eb\u306e\u7a2e\u985e\u3068\u3057\u3066text\u3092\u60f3\u5b9a\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3001bytes\u578b\u3067\u30c7\u30fc\u30bf\u3092\u4fdd\u6301\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3060\u3068print\u3057\u305f\u3068\u304d\u306b\u4e0a\u8a18\u306e\u3088\u3046\u306b <cite>print(repr(data))</cite> \u3057\u305f\u5024\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u307e\u3059\u3002zopen\u306b\u8aad\u307f\u53d6\u308a\u30e2\u30fc\u30c9\u6307\u5b9a\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3079\u304d\u3067\u3057\u305f\u304c\u3001\u4eca\u56de\u306f\u30c6\u30b9\u30c8\u3092\u66f8\u304d\u63db\u3048\u3066\u3057\u307e\u3044\u307e\u3059:</p>\u000a<div class=highlight-python><pre>diff a/README.txt b/README.txt\u000a--- a/README.txt\u000a+++ b/README.txt\u000a@@ -34,13 +34,13 @@\u000a    &gt;&gt;&gt; from zip_open import zopen\u000a    &gt;&gt;&gt; fobj = zopen('packages1.zip/file1.txt')\u000a    &gt;&gt;&gt; data = fobj.read()\u000a-   &gt;&gt;&gt; print data\u000a+   &gt;&gt;&gt; print(data.decode('ascii'))\u000a    I am file1.txt, ok.</pre>\u000a</div>\u000a<p>\u3053\u308c\u3067print\u5468\u308a\u306e\u30a8\u30e9\u30fc\u306f\u7121\u304f\u306a\u308a\u307e\u3057\u305f\u3002</p>\u000a<p>\u304c\u3002</p>\u000a<p>\u3053\u3093\u306a\u306e\u304cPyPI\u306b\u63b2\u8f09\u3055\u308c\u308b\u306e\u306f\u3068\u3066\u3082\u6065\u305a\u304b\u3057\u3044\u3002\u5229\u7528\u30b5\u30f3\u30d7\u30eb\u306b\u3053\u306e\u3088\u3046\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u3068\u4f7f\u3046\u6c17\u304c\u7121\u304f\u306a\u308a\u307e\u3059\u306d\u3002\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u3053\u306e\u3042\u305f\u308a\u3092\u4fee\u6b63\u3059\u308b\u307e\u3067Python3\u5bfe\u5fdc\u7248\u3092\u30ea\u30ea\u30fc\u30b9\u3059\u308b\u306e\u306f\u3084\u3081\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002</p>\u000a<p>\u3053\u306e\u8a18\u4e8b\u3068\u3057\u3066\u306f\u3001\u3068\u308a\u3042\u3048\u305a\u3001\u4eca\u306e\u5b9f\u88c5\u306ePython3\u5316\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u6b8b\u308a\u306e\u30a8\u30e9\u30fc\u3082\u89e3\u6d88\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002</p>\u000a</div>\u000a<div id=open class=section>\u000a<h3>open\u8aad\u307f\u53d6\u308a\u30e2\u30fc\u30c9\u6307\u5b9a\u306e\u30d0\u30b0\u4fee\u6b63<a class=headerlink href=http://www.freia.jp/taka/blog/768/index.html#open title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h3>\u000a<div class=highlight-python><pre>----------------------------------------------------------------------\u000aFile "tests/../README.txt", line 75, in README.txt\u000aFailed example:\u000a    fobj = zopen(zip_fileobj, 'data2.zip/file2.txt')\u000aException raised:\u000a    Traceback (most recent call last):\u000a      File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/doctest.py", line 1253, in __run\u000a        compileflags, 1), test.globs)\u000a      File "&lt;doctest README.txt[14]&gt;", line 1, in &lt;module&gt;\u000a        fobj = zopen(zip_fileobj, 'data2.zip/file2.txt')\u000a      File "/Users/shimizukawa/zip_open/tests/../zip_open.py", line 23, in zopen\u000a        zipobj = ZipFile(fobj)\u000a      File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/zipfile.py", line 719, in __init__\u000a        self._GetContents()\u000a      File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/zipfile.py", line 753, in _GetContents\u000a        self._RealGetContents()\u000a      File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/zipfile.py", line 768, in _RealGetContents\u000a        raise BadZipFile("File is not a zip file")\u000a    zipfile.BadZipFile: File is not a zip file</pre>\u000a</div>\u000a<p>\u306a\u306b\u3084\u3089BadZipFile\u4f8b\u5916\u304c\u767a\u751f\u3057\u305f\u3088\u3046\u3067\u3059\u3002README.txt\u306e\u8a72\u5f53\u7b87\u6240\u3092\u898b\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304b\u308c\u3066\u3044\u307e\u3057\u305f:</p>\u000a<div class=highlight-python><div class=highlight><pre><span class=gp>&gt;&gt;&gt; </span><span class=n>zip_fileobj</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s>'packages2.zip'</span><span class=p>)</span>\u000a</pre></div>\u000a</div>\u000a<p>open\u95a2\u6570\u306f\u8aad\u307f\u53d6\u308a\u30e2\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u3001Python2\u3067\u30823\u3067\u3082\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30c6\u30ad\u30b9\u30c8\u8aad\u307f\u53d6\u308a\u3092\u884c\u3044\u307e\u3059\u3002</p>\u000a<p>Python2\u3067\u306f\u3069\u3061\u3089\u306e\u30e2\u30fc\u30c9\u3067\u8aad\u307f\u8fbc\u3093\u3067\u3082\u3001\u6539\u884c\u30b3\u30fc\u30c9\u5909\u63db\u306a\u3069\u304c\u767a\u751f\u3057\u306a\u3044\u306a\u3089\u7d50\u679c\u306f\u540c\u3058\u3067\u3001\u7d9a\u304f\u51e6\u7406\u306b\u5f71\u97ff\u306f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\uff08\u3082\u3061\u308d\u3093binary\u3067\u8aad\u307f\u8fbc\u3080\u3079\u304d\u3082\u306e\u3092text\u3067\u8aad\u307f\u8fbc\u3093\u3067\u3057\u307e\u3046\u3068\u3044\u3046\u52d5\u4f5c\u306f\u3001\u300c\u4e0e\u3048\u308b\u30d5\u30a1\u30a4\u30eb\u306b\u3088\u3063\u3066\u30a8\u30e9\u30fc\u304c\u518d\u73fe\u3059\u308b\u300d\u3068\u3044\u3046\u5acc\u306a\u30d0\u30b0\u306e\u539f\u56e0\u306b\u306a\u308b\u308f\u3051\u3067\u3059\u304c\u30fb\u30fb\uff09\u3002</p>\u000a<p>Python3\u3067\u306f\u30c6\u30ad\u30b9\u30c8\u30e2\u30fc\u30c9\u3067\u8aad\u307f\u8fbc\u3093\u3060\u3089str\u578b\u3001\u30d0\u30a4\u30ca\u30ea\u30e2\u30fc\u30c9\u3067\u8aad\u307f\u8fbc\u3093\u3060\u3089bytes\u578b\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u9055\u3044\u306b\u3088\u3063\u3066\u3001Python2\u3067\u306f\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u6f5c\u5728\u7684\u30d0\u30b0\u304cPython3\u3067\u5b9f\u884c\u3057\u305f\u305f\u3081\u306b\u51fa\u73fe\u3057\u305f\u3088\u3046\u3067\u3059\u3002</p>\u000a<p>Python3\u3067\u6587\u5b57\u5217\u3068\u30c7\u30fc\u30bf\u5217\u304c\u53b3\u5bc6\u306b\u533a\u5225\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u304a\u304b\u3052\u3067\u3001zip_open\u306e\u4e0d\u5177\u5408\u304c\u660e\u3089\u304b\u306b\u306a\u3063\u305f\u308f\u3051\u3067\u3059\u306d...\u3002</p>\u000a<p>\u3068\u3044\u3046\u3053\u3068\u3067\u30012\u30ab\u6240\u307b\u3069\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u660e\u793a\u7684\u306b\u30d0\u30a4\u30ca\u30ea\u30e2\u30fc\u30c9\u3067\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f:</p>\u000a<div class=highlight-python><div class=highlight><pre><span class=gp>&gt;&gt;&gt; </span><span class=n>zip_fileobj</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s>'packages2.zip'</span><span class=p>,</span> <span class=s>'rb'</span><span class=p>)</span>\u000a</pre></div>\u000a</div>\u000a<p>\u3053\u308c\u3067\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f:</p>\u000a<div class=highlight-python><pre>$ python3.2 tests/test_zip_open.py\u000a.\u000a----------------------------------------------------------------------\u000aRan 1 test in 0.019s\u000a\u000aOK</pre>\u000a</div>\u000a</div>\u000a</div>\u000a<div id=id8 class=section>\u000a<h2>\u307e\u3068\u3081<a class=headerlink href=http://www.freia.jp/taka/blog/768/index.html#id8 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>\u81ea\u5206\u306e\u30b3\u30fc\u30c9\u306b\u30d0\u30b0\u304c\u591a\u304f\u3066\u6ce3\u304d\u305d\u3046\u3067\u3059\u3002</p>\u000a<p>\u6b21\u306e8\u65e5\u76ee\u306f <a class="reference external" href=http://twitter.com/#!/hideaki_t>@hideaki_t</a> \u306b\u30d0\u30c8\u30f3\u3092\u6e21\u305d\u3046\u3068\u601d\u3044\u307e\u3059\u3002\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\u3002</p>\u000a</div>\u000a</div>\u000a
p9
sS'unique_id'
p10
g7
sS'title'
p11
V2011/12/07 \u30e9\u30a4\u30d6\u30e9\u30ea\u3092Python3\u5bfe\u5fdc\u306b\u66f8\u304d\u63db\u3048\u308b
p12
s.