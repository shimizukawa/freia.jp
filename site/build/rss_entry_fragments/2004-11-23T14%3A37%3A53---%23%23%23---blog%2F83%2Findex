(dp0
S'pubdate'
p1
cdatetime
datetime
p2
(S'\x07\xd4\x0b\x17\x0e%5\x00\x00\x00'
p3
tp4
Rp5
sS'link'
p6
Vhttp://www.freia.jp/taka/blog/83/index.html
p7
sS'description'
p8
V<div id=windowsvpnldap-on-freebsd5-2-1 class=section>\u000a<h1>2004/11/23 Windows\u304b\u3089\u306eVPN\u63a5\u7d9a\u8a8d\u8a3c\u3092LDAP\u3067\u7ba1\u7406\u3059\u308b on FreeBSD5.2.1<a class=headerlink href=http://www.freia.jp/taka/blog/83/index.html#windowsvpnldap-on-freebsd5-2-1 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h1>\u000a<p><em>Category: 'Unix', 'Memo'</em></p>\u000a<p>\u4ee5\u524d\u304b\u3089Windows\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306eVPN\u63a5\u7d9a\u6642\u306e\u8a8d\u8a3c\u7ba1\u7406\u3092LDAP\u3067\u51fa\u6765\u306a\u3044\u304b\u3001\u3068\u8003\u3048\u3066\u3044\u307e\u3057\u305f\u304c\u3001freeradius\u3092\u4f7f\u3046\u3053\u3068\u3067\u6210\u529f\u3057\u307e\u3057\u305f\u3002\u5b9f\u306f mpd (PPP\u30b5\u30fc\u30d0\u30fc\u30fb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30bd\u30d5\u30c8) \u304cRADIUS\u30b5\u30fc\u30d0\u30fc\u3068\u9023\u643a\u3067\u304d\u308b\u3053\u3068\u306f\u77e5\u3063\u3066\u3044\u305f\u306e\u3060\u3051\u3069\u300cRADIUS\u3058\u3083\u306a\u304f\u3066LDAP\u3068\u9023\u643a\u3057\u3066\u6b32\u3057\u3044\u306a\u3041\u2025\u2025\u300d\u3068\u601d\u3046\u306b\u3068\u3069\u307e\u3063\u3066\u3044\u307e\u3057\u305f\u3002\u3067\u3001\u3075\u3068\u601d\u3044\u3064\u3044\u3066\u3001"RADIUS LDAP"\u3067\u691c\u7d22\u3057\u305f\u3089\u300c <a class="reference external" href=http://www.linux.or.jp/JF/JFdocs/LDAP-Implementation-HOWTO/radius.html>LDAP \u3092\u4f7f\u3063\u305f Radius \u8a8d\u8a3c</a> \u300d\u3068\u3044\u3046\u30da\u30fc\u30b8\u304c\u3042\u3063\u3055\u308a\u3068\u5f15\u3063\u304b\u304b\u3063\u305f\u306e\u3067\u3001\u4ed6\u306e\u30b5\u30a4\u30c8\u3082\u8abf\u3079\u3064\u3064\u8272\u3005\u3068\u8a66\u3057\u3066\u307f\u305f\u3089\u3046\u307e\u304f\u3044\u304d\u307e\u3057\u305f\u3002</p>\u000a<p>\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u76ee\u6a19\u3002</p>\u000a<ol class="arabic simple">\u000a<li>mpd\u3068freeradius\u3092\u9023\u643a\u3055\u305b\u308b</li>\u000a<li>freeradius\u3068OpenLDAP\u3092\u9023\u643a\u3055\u305b\u308b</li>\u000a<li>LDAP\u5185\u306b\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u683c\u7d0d\u3057\u306a\u3044\uff08\u91cd\u8981\uff01\uff09</li>\u000a</ol>\u000a<p>\u4ee5\u4e0b\u3001\u74b0\u5883\u69cb\u7bc9\u624b\u9806\u3067\u3059\u304c\u3001\u81ea\u5206\u306e\u74b0\u5883\u7528\u306b\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5834\u6240\u306fFreeBSD\u3067ports\u3092\u4f7f\u7528\u3057\u305f\u5834\u5408\u306e\u5834\u6240\u3067\u3059\u3002\u3068\u8a00\u3063\u3066\u3082\u3001Linux\u306e\u5834\u5408\u306f/usr/local/etc\u3092/etc\u306b\u8aad\u307f\u66ff\u3048\u308b\u3060\u3051\u3067\u826f\u3044\u3088\u3046\u306a\u6c17\u3082\u3057\u307e\u3059\u3002</p>\u000a<div id=id1 class=section>\u000a<h2>\u30b5\u30fc\u30d0\u30fc\u74b0\u5883<a class=headerlink href=http://www.freia.jp/taka/blog/83/index.html#id1 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<ul class=simple>\u000a<li>FreeBSD-5.2.1-SECURITY</li>\u000a<li>IP: 192.168.1.200</li>\u000a<li>mpd-3.18</li>\u000a<li>freeradius-1.0.1</li>\u000a<li>openldap-2.2.17</li>\u000a<li>samba-3.0.7</li>\u000a</ul>\u000a<p>\u6700\u5f8c\u306esamba\u304c\u610f\u5916\u306a\u3068\u3053\u308d\u3067\u91cd\u8981\u3067\u3057\u305f\u3002VPN\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304cWindows\u306a\u306e\u3067\u5f53\u305f\u308a\u524d\u3068\u8a00\u3048\u3070\u5f53\u305f\u308a\u524d\u3067\u3059\u304c\u2025\u2025\u3002\u7d50\u5c40\u3001samba\u30a2\u30ab\u30a6\u30f3\u30c8\u3092LDAP\u3067\u7ba1\u7406\u3057\u3066\u3044\u305f\u305f\u3081\u3001\u74b0\u5883\u306e\u7528\u610f\u304c\u6bd4\u8f03\u7684\u7c21\u5358\u306b\u6e08\u307f\u307e\u3057\u305f\u3002\u3068\u3044\u3046\u306e\u306f\u3001VPN\u63a5\u7d9a\u8a8d\u8a3c\u3067\u4f7f\u7528\u3055\u308c\u308bMS-CHAP\u3067samba\u30d1\u30b9\u30ef\u30fc\u30c9\uff08\u3068\u8a00\u3046\u304bNTLM\u30cf\u30c3\u30b7\u30e5\uff09\u304c\u4f7f\u308f\u308c\u308b\u304b\u3089\u3067\u3059\u3002</p>\u000a<p>\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u8a2d\u5b9a\u6cd5\u88dc\u3092\u9806\u756a\u306b\u8aac\u660e\u3057\u307e\u3059\u3002</p>\u000a</div>\u000a<div id=mpd-3-18 class=section>\u000a<h2>mpd-3.18\u306e\u8a2d\u5b9a<a class=headerlink href=http://www.freia.jp/taka/blog/83/index.html#mpd-3-18 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>2004/11/23\u73fe\u5728\u6700\u65b0\u306e\u30013.18\u306b\u4ed8\u5c5e\u3057\u3066\u304f\u308bmpd.conf.sample\u306b\u306f\u3001radius\u3068\u9023\u643a\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u304c"radius:"\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\u305f\u3060\u3057\u3001pptp\u30bb\u30af\u30b7\u30e7\u30f3\u5185\u3067"load radius"\u3068\u3044\u3046\u884c\u304c\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u305d\u306e\u307e\u307e\u3067\u306f\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002\u624b\u5143\u306e\u74b0\u5883\u306b\u306f\u3060\u3044\u3076\u524d\u306b\u4f5c\u3063\u305fmpd.conf\u304c\u3042\u308b\u306e\u3067\u3001"radius:"\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u30b3\u30d4\u30fc\u3057\u3066\u4f7f\u3044\u307e\u3057\u305f\u3002</p>\u000a<p>\u4eca\u56de\u4f7f\u7528\u3057\u305fmpd.conf:</p>\u000a<div class=highlight-python><pre>default:\u000a        load pptp\u000a\u000apptp:\u000a        load pptp1\u000a        load pptp2\u000a        load pptp3\u000a        load pptp4\u000a\u000apptp1:\u000a        new -i ng1 pptp1 link-pptp\u000a        load pptp-conf\u000a        set ipcp ranges 192.168.1.200/32 192.168.1.240/32\u000a\u000apptp2:\u000a        new -i ng2 pptp2 link-pptp2\u000a        load pptp-conf\u000a        set ipcp ranges 192.168.1.200/32 192.168.1.241/32\u000a\u000apptp3:\u000a        new -i ng3 pptp3 link-pptp3\u000a        load pptp-conf\u000a        set ipcp ranges 192.168.1.200/32 192.168.1.242/32\u000a\u000apptp4:\u000a        new -i ng4 pptp4 link-pptp4\u000a        load pptp-conf\u000a        set ipcp ranges 192.168.1.200/32 192.168.1.243/32\u000a\u000apptp-conf:\u000a        load radius\u000a        set bundle yes radius-acct\u000a        set iface disable on-demand\u000a        set iface enable proxy-arp\u000a        set iface idle 1800\u000a        set bundle disable multilink\u000a        set link yes acfcomp protocomp\u000a        set link no pap chap\u000a        set link enable chap\u000a        set link keep-alive 10 240\u000a        set ipcp yes vjcomp\u000a        set ipcp nbns 192.168.1.200\u000a        set ipcp dns 192.168.1.200\u000a        set bundle enable compression\u000a        set ccp yes mppc\u000a        set ccp yes mpp-e40\u000a        set ccp yes mpp-e128\u000a        set ccp yes mpp-stateless\u000a\u000aradius:\u000a        set radius config /etc/radius.conf\u000a        set radius retries 3\u000a        set radius timeout 3\u000a        set radius acct-update 300\u000a        set bundle enable radius-auth radius-fallback\u000a        set bundle enable radius-acct\u000a        set iface enable radius-idle radius-session radius-mtu radius-route\u000a        set bundle enable compression\u000a        set ccp yes mppc\u000a        set ccp enable radius</pre>\u000a</div>\u000a<p>\u3053\u306e\u4e2d\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b /etc/radius.conf:</p>\u000a<div class=highlight-python><pre>auth 127.0.0.1 testing123\u000aacct 127.0.0.1 testing123</pre>\u000a</div>\u000a<p>\u8a18\u8ff0\u306e\u610f\u5473\u3068\u3057\u3066\u306f\u3001radius\u30b5\u30fc\u30d0\u30fc\u3067\u30a2\u30ab\u30a6\u30f3\u30c8\u78ba\u8a8d(acct)\u3068\u8a8d\u8a3c(auth)\u3092\u884c\u3046\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u305d\u306e\u969b\u306e\u63a5\u7d9a\u5148\u306f127.0.0.1(localhost)\u3067\u3001radius\u30b5\u30fc\u30d0\u30fc\u3068\u306e\u63a5\u7d9a\u306b\u4f7f\u7528\u3059\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u304c"testing123"\u3067\u3059\u3002</p>\u000a</div>\u000a<div id=freeradius-1-0-1 class=section>\u000a<h2>freeradius-1.0.1\u306e\u8a2d\u5b9a<a class=headerlink href=http://www.freia.jp/taka/blog/83/index.html#freeradius-1-0-1 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>/usr/local/etc/raddb/radius.conf \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u305f\u304f\u3055\u3093\u306e\u8a8d\u8a3c\u65b9\u6cd5\u304c\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306e <em>LDAP\u3067\u8a8d\u8a3c\u3059\u308b</em> \u305f\u3081\u306e\u8a2d\u5b9a\u306f\u3054\u304f\u3054\u304f\u5c11\u306a\u3044\u884c\u6570\u3067\u66f8\u304f\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\uff08\u3068\u8a00\u3063\u3066\u3082\u57fa\u672c\u8a2d\u5b9a\u90e8\u5206\u306f\u6b8b\u3057\u307e\u3057\u305f\uff09:</p>\u000a<div class=highlight-python><pre>prefix = /usr/local\u000aexec_prefix = ${prefix}\u000asysconfdir = ${prefix}/etc\u000alocalstatedir = /var\u000asbindir = ${exec_prefix}/sbin\u000alogdir = /var/log\u000araddbdir = ${sysconfdir}/raddb\u000aradacctdir = ${logdir}/radacct\u000a\u000aconfdir = ${raddbdir}\u000arun_dir = ${localstatedir}/run/radiusd\u000alog_file = ${logdir}/radius.log\u000alibdir = ${exec_prefix}/lib\u000apidfile = ${run_dir}/radiusd.pid\u000amax_request_time = 30\u000adelete_blocked_requests = no\u000acleanup_delay = 5\u000amax_requests = 1024\u000abind_address = *\u000aport = 0\u000ahostname_lookups = no\u000aallow_core_dumps = no\u000aregular_expressions     = yes\u000aextended_expressions    = yes\u000alog_stripped_names = no\u000alog_auth = yes\u000alog_auth_badpass = no\u000alog_auth_goodpass = no\u000ausercollide = no\u000alower_user = no\u000alower_pass = no\u000anospace_user = no\u000anospace_pass = no\u000acheckrad = ${sbindir}/checkrad\u000a$INCLUDE  ${confdir}/clients.conf\u000a\u000a\u000amodules {\u000a        mschap {\u000a                authtype = MS-CHAP\u000a        }\u000a        ldap {\u000a                server = "localhost"\u000a                basedn = "ou=Users,dc=freia,dc=jp"\u000a                filter = "(uid=%{Stripped-User-Name:-%{User-Name}})"\u000a                start_tls = no\u000a                ldap_connections_number = 5\u000a                timeout = 4\u000a                timelimit = 3\u000a                net_timeout = 1\u000a        }\u000a}\u000aauthorize {\u000a        ldap\u000a        mschap\u000a}\u000aauthenticate {\u000a        Auth-Type MS-CHAP {\u000a                mschap\u000a        }\u000a}</pre>\u000a</div>\u000a<p>modules\u30bb\u30af\u30b7\u30e7\u30f3\u5185\u306eldap\u30bb\u30af\u30b7\u30e7\u30f3\u306f\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u66f8\u304d\u63db\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u81ea\u5206\u306e\u74b0\u5883\u3067\u306fLDAP\u901a\u4fe1\u306e\u6697\u53f7\u5316\u306f\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u3068\u306a\u308a\u307e\u3059\u3002\u3042\u3068\u3001\u3053\u3053\u3067\u306fbinddn\u306b\u95a2\u3059\u308b\u8a18\u8ff0\u304c\u3042\u308a\u307e\u305b\u3093\u306e\u3067\u3001 <strong>LDAP\u306f\u7121\u8a8d\u8a3c\u3067\u4e00\u90e8\u306e\u60c5\u5831\u3092\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f</strong> \uff08\u81ea\u5206\u306f\u3053\u3053\u3067\u306f\u307e\u308a\u307e\u3057\u305f\u2025\u2025\uff09\u3002</p>\u000a<p>\u3068\u308a\u3042\u3048\u305aLDAP\u306e\u8a2d\u5b9a\u306f\u5f8c\u306b\u3057\u3066\u3001radius\u306e\u6b8b\u308a\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002</p>\u000a<p>/usr/local/etc/raddb/clients.conf:</p>\u000a<div class=highlight-python><pre>client 127.0.0.1 {\u000a        secret    = testing123\u000a        shortname = localhost\u000a        nastype   = other\u000a}</pre>\u000a</div>\u000a<p><em>secret</em> \u306b\u306fradius\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306e\u8a8d\u8a3c\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002/etc/radius.conf \u306b\u8a18\u8ff0\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u3059\u306d\u3002</p>\u000a<p>/usr/local/etc/raddb/users:</p>\u000a<div class=highlight-python><pre>DEFAULT Auth-Type = LDAP\u000a        Fall-Through = 1</pre>\u000a</div>\u000a<p>\u3044\u3061\u304a\u3046\u4e0a\u8a18\u306e\u3088\u3046\u306b\u66f8\u3044\u3066\u3044\u307e\u3059\u304c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u8a2d\u5b9a\u306e\u307e\u307e\u3067\u554f\u984c\u306a\u3044\u3088\u3046\u3067\u3059\u3002\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u30e6\u30fc\u30b6\u30fc\u500b\u5225\u306b\u8a8d\u8a3c\u65b9\u5f0f\u3092\u5909\u3048\u305f\u3044\u3068\u304d\u306b\u4f7f\u3046\u3093\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306fLDAP\u3067\u7ba1\u7406\u3059\u308b\u306e\u3067\u3001\u3001\u3001\u3001\u3082\u3057\u304b\u3057\u3066users\u30d5\u30a1\u30a4\u30eb\u306f\u7a7a\u3067\u3082\u554f\u984c\u306a\u3044\u3093\u3058\u3083\u2025\u2025\u3068\u601d\u3044\u7a7a\u306b\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u3061\u3083\u3093\u3068\u52d5\u4f5c\u3057\u307e\u3057\u305f\u3002\u4e0d\u601d\u8b70\u3002</p>\u000a<p>radius\u8a2d\u5b9a\u306e\u6700\u5f8c\u306f\u3001/usr/local/etc/raddb/ldap.attrmap\u3067\u3059\u3002samba2.x\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u7de8\u96c6\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001samba3\u4ee5\u964d\u3067\u30b9\u30ad\u30fc\u30de\u304c\u5909\u66f4\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u65b0\u3057\u3044\u30a2\u30c8\u30ea\u30d3\u30e5\u30fc\u30c8\u540d\u306b\u66f8\u304d\u63db\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p>\u000a<p>\u5909\u66f4\u524d(samba2\u7528):</p>\u000a<div class=highlight-python><pre>checkItem       LM-Password                     lmPassword\u000acheckItem       NT-Password                     ntPassword</pre>\u000a</div>\u000a<p>\u5909\u66f4\u5f8c(samba3\u7528):</p>\u000a<div class=highlight-python><pre>checkItem       LM-Password                     sambaLMPassword\u000acheckItem       NT-Password                     sambaNTPassword</pre>\u000a</div>\u000a<p>\u3053\u308c\u3067freeradius\u306e\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\u5358\u4f53\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u304c\u3001\u4eca\u56de\u306e\u3088\u3046\u306b\u8272\u3005\u306a\u8981\u7d20\u304c\u9023\u643a\u3057\u3066\u3044\u308b\u3068\u30c6\u30b9\u30c8\u3059\u308b\u306e\u304c\u306a\u304b\u306a\u304b\u96e3\u3057\u304f\u3066\u56f0\u308a\u3082\u306e\u3067\u3059\u3002</p>\u000a<p>\u3068\u308a\u3042\u3048\u305a <a class="reference internal" href=http://www.freia.jp/taka/blog/83/index.html#id3>\u52d5\u4f5c\u30c6\u30b9\u30c8</a> \u306b\u3064\u3044\u3066\u306f\u6700\u5f8c\u306e\u65b9\u306b\u66f8\u304d\u307e\u3059\u3002</p>\u000a</div>\u000a<div id=openldap-2-2-17 class=section>\u000a<h2>openldap-2.2.17\u306e\u8a2d\u5b9a<a class=headerlink href=http://www.freia.jp/taka/blog/83/index.html#openldap-2-2-17 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>LDAP\u306e\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u3066\u3001\u30dd\u30a4\u30f3\u30c8\u3060\u3051\u3002</p>\u000a<ul class=simple>\u000a<li>samba\u30b9\u30ad\u30fc\u30de\u3092\u5229\u7528\u3057\u3066\u3044\u308b</li>\u000a<li>VPN\u63a5\u7d9a\u30a2\u30ab\u30a6\u30f3\u30c8\u306f\u3001objectClass=sambaAccount\u3067\u3042\u308b</li>\u000a<li>\u7121\u8a8d\u8a3c\u3067 sambaNTPassword, sambaLMPassword \u3092\u53c2\u7167\u3067\u304d\u308b</li>\u000a<li>VPN\u63a5\u7d9a\u6642\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u306fsamba\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5229\u7528\u3055\u308c\u308b</li>\u000a</ul>\u000a<p>\u81ea\u5206\u306f\u3001sambaNTPassword, sambaLMPassword \u3092\u8a8d\u8a3c\u5f8c\u3067\u306a\u3044\u3068\u95b2\u89a7\u3067\u304d\u306a\u3044\u3088\u3046\u306bslapd.conf\u3092\u8a2d\u5b9a\u3057\u3066\u3057\u307e\u3063\u3066\u3044\u305f\u305f\u3081\u3001radiusd\u306e\u30ed\u30b0\u3067:</p>\u000a<div class=highlight-python><pre>rlm_mschap: No User-Password configured.  Cannot create LM-Password.\u000arlm_mschap: No User-Password configured.  Cannot create NT-Password.</pre>\u000a</div>\u000a<p>\u306a\u3093\u3066\u6012\u3089\u308c\u3066\u3044\u307e\u3057\u305f\u3002</p>\u000a</div>\u000a<div id=samba-3-0-7 class=section>\u000a<h2>samba-3.0.7\u306e\u8a2d\u5b9a<a class=headerlink href=http://www.freia.jp/taka/blog/83/index.html#samba-3-0-7 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>\u304c\u3093\u3070\u308a\u307e\u3057\u3087\u3046\uff08\u7b11\uff09\u3002\u3053\u3061\u3089\u3082\u30dd\u30a4\u30f3\u30c8\u3060\u3051\u3002</p>\u000a<ul class=simple>\u000a<li>VPN\u63a5\u7d9a\u6642\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u306fsamba\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5229\u7528\u3055\u308c\u308b</li>\u000a<li>posix\u306e\u30d1\u30b9\u30ef\u30fc\u30c9(userPassword)\u3068samba\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u540c\u671f\u3057\u3066\u3044\u308b\u5fc5\u8981\u306f\u306a\u3044</li>\u000a</ul>\u000a<p>\u540c\u671f\u3057\u3066\u3044\u308b\u5fc5\u8981\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u8a8d\u8a3c\u7d71\u5408\u3059\u308b\u305f\u3081\u306b\u306f\u540c\u671f\u3057\u3066\u3044\u305f\u65b9\u304c\u3044\u3044\u3067\u3059\u306d\u3002\u81ea\u5206\u306e\u74b0\u5883\u3067\u306f\u3001nss\u3092\u4f7f\u3063\u3066Unix\u30b7\u30a7\u30eb(ssh)\u306e\u8a8d\u8a3c\u3092LDAP\u3067\u884c\u3063\u305f\u308a\u3001Zope\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u7ba1\u7406\u3092LDAP\u3067\u3084\u3063\u3066\u3044\u305f\u308a\u3057\u307e\u3059\u3002\u8a73\u3057\u304f\u306f <a class="reference external" href=http://www.freia.jp/taka/wiki/X_e3_82_a2_e3_82_ab_e3_82_a6_e3_83_b3_e3_83_88_e4_b8_80_e6_8b_ac_e7_ae_a1_e7_90_86>Wiki\u30da\u30fc\u30b8\u306e\u65b9</a> \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\uff08\u60c5\u5831\u53e4\u3081\u3067\u3059\u304c\u2025\u2025\uff09</p>\u000a</div>\u000a<div id=id3 class=section>\u000a<h2>\u52d5\u4f5c\u30c6\u30b9\u30c8<a class=headerlink href=http://www.freia.jp/taka/blog/83/index.html#id3 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>\u52d5\u4f5c\u30c6\u30b9\u30c8\u306e\u305f\u3081\u306b\u3001/usr/local/sbin/mpd -b, \u304a\u3088\u3073 /usr/local/sbin/radiusd -X \u3067\u8d77\u52d5\u3057\u307e\u3059\u3002radius\u306e"-X"\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u30b3\u30f3\u30bd\u30fc\u30eb\u30e2\u30fc\u30c9\u3067\u306e\u8d77\u52d5\u6307\u5b9a\u3067\u3001\u8a8d\u8a3c\u306e\u6d41\u308c\u3092\u898b\u308b\u305f\u3081\u306b\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u4eca\u56dempd\u306e\u65b9\u306f"-b"\u3067\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u52d5\u4f5c\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u5fc5\u8981\u3067\u3042\u308c\u3070\u5225\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067 /usr/local/sbin/mpd \u3067\u8d77\u52d5\u3059\u308b\u3053\u3068\u3067\u3001\u4e21\u65b9\u3068\u3082\u30b3\u30f3\u30bd\u30fc\u30eb\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3057\u3066\u304a\u304f\u3053\u3068\u3082\u51fa\u6765\u307e\u3059\u3002</p>\u000a<p>\u305d\u3057\u3066\u3001Windows\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089VPN\u63a5\u7d9a\u3057\u305f\u3068\u304d\u306eradius\u306e\u753b\u9762\u51fa\u529b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff08IP\u30fb\u30b5\u30fc\u30d0\u30fc\u540d\u30fb\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u306a\u3069\u306f\u66f8\u304d\u63db\u3048\u3066\u3042\u308a\u307e\u3059\uff09:</p>\u000a<div class=highlight-python><pre>root% /usr/local/sbin/radiusd -X\u000a\u000aStarting - reading configuration files ...\u000areread_config:  reading radiusd.conf\u000aConfig:   including file: /usr/local/etc/raddb/clients.conf\u000a main: prefix = "/usr/local"\u000a main: localstatedir = "/var"\u000a main: logdir = "/var/log"\u000a main: libdir = "/usr/local/lib"\u000a main: radacctdir = "/var/log/radacct"\u000a main: hostname_lookups = no\u000a main: snmp = no\u000a main: max_request_time = 30\u000a main: cleanup_delay = 5\u000a main: max_requests = 1024\u000a main: delete_blocked_requests = 0\u000a main: port = 0\u000a main: allow_core_dumps = no\u000a main: log_stripped_names = no\u000a main: log_file = "/var/log/radius.log"\u000a main: log_auth = yes\u000a main: log_auth_badpass = no\u000a main: log_auth_goodpass = no\u000a main: pidfile = "/var/run/radiusd/radiusd.pid"\u000a main: user = "(null)"\u000a main: group = "(null)"\u000a main: usercollide = no\u000a main: lower_user = "no"\u000a main: lower_pass = "no"\u000a main: nospace_user = "no"\u000a main: nospace_pass = "no"\u000a main: checkrad = "/usr/local/sbin/checkrad"\u000a main: proxy_requests = yes\u000a main: debug_level = 0\u000aread_config_files:  reading dictionary\u000aread_config_files:  reading naslist\u000aUsing deprecated naslist file.  Support for this will go away soon.\u000aread_config_files:  reading clients\u000aread_config_files:  reading realms\u000aradiusd:  entering modules setup\u000aModule: Library search path is /usr/local/lib\u000aModule: Loaded MS-CHAP\u000a mschap: use_mppe = yes\u000a mschap: require_encryption = no\u000a mschap: require_strong = no\u000a mschap: with_ntdomain_hack = no\u000a mschap: passwd = "(null)"\u000a mschap: authtype = "MS-CHAP"\u000a mschap: ntlm_auth = "(null)"\u000aModule: Instantiated mschap (mschap)\u000aModule: Loaded LDAP\u000a ldap: server = "localhost"\u000a ldap: port = 389\u000a ldap: net_timeout = 1\u000a ldap: timeout = 4\u000a ldap: timelimit = 3\u000a ldap: identity = ""\u000a ldap: tls_mode = no\u000a ldap: start_tls = no\u000a ldap: tls_cacertfile = "(null)"\u000a ldap: tls_cacertdir = "(null)"\u000a ldap: tls_certfile = "(null)"\u000a ldap: tls_keyfile = "(null)"\u000a ldap: tls_randfile = "(null)"\u000a ldap: tls_require_cert = "allow"\u000a ldap: password = ""\u000a ldap: basedn = "ou=Users,dc=freia,dc=jp"\u000a ldap: filter = "(uid=%{Stripped-User-Name:-%{User-Name}})"\u000a ldap: base_filter = "(objectclass=radiusprofile)"\u000a ldap: default_profile = "(null)"\u000a ldap: profile_attribute = "(null)"\u000a ldap: password_header = "(null)"\u000a ldap: password_attribute = "(null)"\u000a ldap: access_attr = "(null)"\u000a ldap: groupname_attribute = "cn"\u000a ldap: groupmembership_filter = "(|(&amp;amp;(objectClass=GroupOfNames)(member=%{Ldap-UserDn}))(&amp;amp;(objectClass=GroupOfUniqueNames)(uniquemember=%{Ldap-UserDn})))"\u000a ldap: groupmembership_attribute = "(null)"\u000a ldap: dictionary_mapping = "/usr/local/etc/raddb/ldap.attrmap"\u000a ldap: ldap_debug = 0\u000a ldap: ldap_connections_number = 5\u000a ldap: compare_check_items = no\u000a ldap: access_attr_used_for_allow = yes\u000a ldap: do_xlat = yes\u000arlm_ldap: Registering ldap_groupcmp for Ldap-Group\u000arlm_ldap: Registering ldap_xlat with xlat_name ldap\u000arlm_ldap: reading ldap\uff1c-\uff1eradius mappings from file /usr/local/etc/raddb/ldap.attrmap\u000arlm_ldap: LDAP radiusCheckItem mapped to RADIUS $GENERIC$\u000arlm_ldap: LDAP radiusReplyItem mapped to RADIUS $GENERIC$\u000arlm_ldap: LDAP radiusAuthType mapped to RADIUS Auth-Type\u000arlm_ldap: LDAP radiusSimultaneousUse mapped to RADIUS Simultaneous-Use\u000arlm_ldap: LDAP radiusCalledStationId mapped to RADIUS Called-Station-Id\u000arlm_ldap: LDAP radiusCallingStationId mapped to RADIUS Calling-Station-Id\u000arlm_ldap: LDAP sambaLMPassword mapped to RADIUS LM-Password\u000arlm_ldap: LDAP sambaNTPassword mapped to RADIUS NT-Password\u000arlm_ldap: LDAP radiusExpiration mapped to RADIUS Expiration\u000arlm_ldap: LDAP radiusServiceType mapped to RADIUS Service-Type\u000arlm_ldap: LDAP radiusFramedProtocol mapped to RADIUS Framed-Protocol\u000arlm_ldap: LDAP radiusFramedIPAddress mapped to RADIUS Framed-IP-Address\u000arlm_ldap: LDAP radiusFramedIPNetmask mapped to RADIUS Framed-IP-Netmask\u000arlm_ldap: LDAP radiusFramedRoute mapped to RADIUS Framed-Route\u000arlm_ldap: LDAP radiusFramedRouting mapped to RADIUS Framed-Routing\u000arlm_ldap: LDAP radiusFilterId mapped to RADIUS Filter-Id\u000arlm_ldap: LDAP radiusFramedMTU mapped to RADIUS Framed-MTU\u000arlm_ldap: LDAP radiusFramedCompression mapped to RADIUS Framed-Compression\u000arlm_ldap: LDAP radiusLoginIPHost mapped to RADIUS Login-IP-Host\u000arlm_ldap: LDAP radiusLoginService mapped to RADIUS Login-Service\u000arlm_ldap: LDAP radiusLoginTCPPort mapped to RADIUS Login-TCP-Port\u000arlm_ldap: LDAP radiusCallbackNumber mapped to RADIUS Callback-Number\u000arlm_ldap: LDAP radiusCallbackId mapped to RADIUS Callback-Id\u000arlm_ldap: LDAP radiusFramedIPXNetwork mapped to RADIUS Framed-IPX-Network\u000arlm_ldap: LDAP radiusClass mapped to RADIUS Class\u000arlm_ldap: LDAP radiusSessionTimeout mapped to RADIUS Session-Timeout\u000arlm_ldap: LDAP radiusIdleTimeout mapped to RADIUS Idle-Timeout\u000arlm_ldap: LDAP radiusTerminationAction mapped to RADIUS Termination-Action\u000arlm_ldap: LDAP radiusLoginLATService mapped to RADIUS Login-LAT-Service\u000arlm_ldap: LDAP radiusLoginLATNode mapped to RADIUS Login-LAT-Node\u000arlm_ldap: LDAP radiusLoginLATGroup mapped to RADIUS Login-LAT-Group\u000arlm_ldap: LDAP radiusFramedAppleTalkLink mapped to RADIUS Framed-AppleTalk-Link\u000arlm_ldap: LDAP radiusFramedAppleTalkNetwork mapped to RADIUS Framed-AppleTalk-Network\u000arlm_ldap: LDAP radiusFramedAppleTalkZone mapped to RADIUS Framed-AppleTalk-Zone\u000arlm_ldap: LDAP radiusPortLimit mapped to RADIUS Port-Limit\u000arlm_ldap: LDAP radiusLoginLATPort mapped to RADIUS Login-LAT-Port\u000aconns: 0x80b8400\u000aModule: Instantiated ldap (ldap)\u000aListening on authentication *:1812\u000aListening on accounting *:1813\u000aListening on proxy *:1814\u000aReady to process requests.\u000arad_recv: Access-Request packet from host 127.0.0.1:60238, id=122, length=164\u000a        NAS-Identifier = "host.freia.jp"\u000a        NAS-Port = 0\u000a        NAS-Port-Type = Virtual\u000a        Service-Type = Framed-User\u000a        Framed-Protocol = PPP\u000a        Calling-Station-Id = "219.121.60.xxx"\u000a        User-Name = "taka"\u000a        MS-CHAP-Challenge = 0xbb1068a606df60de71a4068500527c74\u000a        MS-CHAP2-Response = 0x010082e63035745600d200aaa4bf454656070000000000000000b286b1c7530b18a80c82289f90e7ad4db5b01db28a0af076\u000a  Processing the authorize section of radiusd.conf\u000amodcall: entering group authorize for request 0\u000arlm_ldap: - authorize\u000arlm_ldap: performing user authorization for taka\u000aradius_xlat:  '(uid=taka)'\u000aradius_xlat:  'ou=Users,dc=freia,dc=jp'\u000arlm_ldap: ldap_get_conn: Checking Id: 0\u000arlm_ldap: ldap_get_conn: Got Id: 0\u000arlm_ldap: attempting LDAP reconnection\u000arlm_ldap: (re)connect to localhost:389, authentication 0\u000arlm_ldap: bind as / to localhost:389\u000arlm_ldap: waiting for bind result ...\u000arlm_ldap: Bind was successful\u000arlm_ldap: performing search in ou=Users,dc=freia,dc=jp, with filter (uid=taka)\u000arlm_ldap: looking for check items in directory...\u000arlm_ldap: Adding sambaNTPassword as NT-Password, value B70F540C80BBC4C037910072C04837ED &amp;amp; op=21\u000arlm_ldap: Adding sambaLMPassword as LM-Password, value 5F029DC02B6C0D0C87690D42E08DF5EE &amp;amp; op=21\u000arlm_ldap: looking for reply items in directory...\u000arlm_ldap: user taka authorized to use remote access\u000arlm_ldap: ldap_release_conn: Release Id: 0\u000a  modcall[authorize]: module "ldap" returns ok for request 0\u000a  rlm_mschap: Found MS-CHAP attributes.  Setting 'Auth-Type  = MS-CHAP'\u000a  modcall[authorize]: module "mschap" returns ok for request 0\u000amodcall: group authorize returns ok for request 0\u000a  rad_check_password:  Found Auth-Type MS-CHAP\u000aauth: type "MS-CHAP"\u000a  Processing the authenticate section of radiusd.conf\u000amodcall: entering group Auth-Type for request 0\u000a  rlm_mschap: Found LM-Password\u000a  rlm_mschap: Found NT-Password\u000a  rlm_mschap: Told to do MS-CHAPv2 for taka with NT-Password\u000arlm_mschap: adding MS-CHAPv2 MPPE keys\u000a  modcall[authenticate]: module "mschap" returns ok for request 0\u000amodcall: group Auth-Type returns ok for request 0\u000aLogin OK: [taka] (from client localhost port 0 cli 219.121.60.111)\u000aSending Access-Accept of id 122 to 127.0.0.1:60238\u000a        MS-CHAP2-Success = 0x01533d41324643393538044345373733063439463246024331353330324146423601383431430241303936\u000a        MS-MPPE-Recv-Key = 0x408c031d5390d2c72b140b004f0df5fc\u000a        MS-MPPE-Send-Key = 0x56815e0082a820e2e891bc02aa20628e\u000a        MS-MPPE-Encryption-Policy = 0x00000001\u000a        MS-MPPE-Encryption-Types = 0x00000006\u000aFinished request 0</pre>\u000a</div>\u000a<p>\u307e\u305a\u8d77\u52d5\u304b\u3089\u898b\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002</p>\u000a<p>\u8d77\u52d5\u6642\u306bradius\u4e0a\u306e\u8a2d\u5b9a\u60c5\u5831\u3068LDAP\u306e\u60c5\u5831\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u3066\u3044\u308b\u7b87\u6240\u3067\u3001\u6b63\u3057\u304fsambaNTPassword,sambaLMPassword\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u3066\u3044\u308c\u3070OK\u3067\u3059:</p>\u000a<div class=highlight-python><pre>rlm_ldap: LDAP sambaLMPassword mapped to RADIUS LM-Password\u000arlm_ldap: LDAP sambaNTPassword mapped to RADIUS NT-Password</pre>\u000a</div>\u000a<p>Windows\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089VPN\u63a5\u7d9a\u3092\u884c\u3044\u3001mpd\u304b\u3089\u8a8d\u8a3c\u8981\u8acb\u304c\u6765\u305f\u90e8\u5206\u304c\u4ee5\u4e0b\u306e\u884c\u3067\u3059:</p>\u000a<div class=highlight-python><pre>rad_recv: Access-Request packet from host 127.0.0.1:60238, id=122, length=164</pre>\u000a</div>\u000a<p>\u305d\u306e\u5f8c\u3001mpd\u304b\u3089\u306e\u554f\u3044\u5408\u308f\u305b\u60c5\u5831\u3092\u5143\u306b\u3001ldap\u304b\u3089\u8a8d\u8a3c\u306e\u305f\u3081\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002LDAP\u3067\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3067\u306f\u306a\u304f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u5b58\u5728\u3060\u3051\u304c\u30c1\u30a7\u30c3\u30af\u3055\u308c\u307e\u3059\u304c\u3001\u3082\u3046\u4e00\u3064\u306e\u91cd\u8981\u306a\u60c5\u5831\u3001samba\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u304cradius\u306b\u6e21\u3055\u308c\u307e\u3059:</p>\u000a<div class=highlight-python><pre>modcall: entering group authorize for request 0\u000arlm_ldap: - authorize\u000arlm_ldap: performing user authorization for taka\u000aradius_xlat:  '(uid=taka)'\u000aradius_xlat:  'ou=Users,dc=freia,dc=jp'\u000arlm_ldap: ldap_get_conn: Checking Id: 0\u000arlm_ldap: ldap_get_conn: Got Id: 0\u000arlm_ldap: attempting LDAP reconnection\u000arlm_ldap: (re)connect to localhost:389, authentication 0\u000arlm_ldap: bind as / to localhost:389\u000arlm_ldap: waiting for bind result ...\u000arlm_ldap: Bind was successful\u000arlm_ldap: performing search in ou=Users,dc=freia,dc=jp, with filter (uid=taka)\u000arlm_ldap: looking for check items in directory...\u000arlm_ldap: Adding sambaNTPassword as NT-Password, value B70F540C80BBC4C037910072C04837ED &amp;amp; op=21\u000arlm_ldap: Adding sambaLMPassword as LM-Password, value 5F029DC02B6C0D0C87690D42E08DF5EE &amp;amp; op=21\u000arlm_ldap: looking for reply items in directory...\u000arlm_ldap: user taka authorized to use remote access\u000arlm_ldap: ldap_release_conn: Release Id: 0\u000a  modcall[authorize]: module "ldap" returns ok for request 0</pre>\u000a</div>\u000a<p>\u4e0a\u8a18\u3067\u3001LDAP\u3068\u3046\u307e\u304f\u9023\u643a\u3067\u304d\u3066\u3044\u308c\u3070\u3001sambaNTPassword\u3068sambaLMPassword\u304c NT-Password, LM-Password \u3068\u3044\u3046\u5909\u6570\u306b\u53d6\u5f97\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u3082\u3057\u3053\u306e\u4e8c\u3064\u306e\u5024\u3092\u53d6\u5f97\u3067\u304d\u306a\u304b\u3063\u305f\u3068\u3057\u3066\u3082ldap\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u306eauthorize\u306f\u6210\u529f\u3057\u305f\u3068\u8868\u793a\u3055\u308c\u3066\u3057\u307e\u3046(\u6700\u5f8c\u306e\u884c)\u305f\u3081\u3001\u6ce8\u610f\u3057\u3066\u307f\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff08\u3042\u308a\u307e\u3057\u305f...)\u3002</p>\u000a<p>\u305d\u3057\u3066\u6700\u5f8c\u306bMS-CHAP\u306b\u3088\u308b\u30d1\u30b9\u30ef\u30fc\u30c9\u30c1\u30a7\u30c3\u30af\u3067\u3059:</p>\u000a<div class=highlight-python><pre>  rad_check_password:  Found Auth-Type MS-CHAP\u000aauth: type "MS-CHAP"\u000a  Processing the authenticate section of radiusd.conf\u000amodcall: entering group Auth-Type for request 0\u000a  rlm_mschap: Found LM-Password\u000a  rlm_mschap: Found NT-Password\u000a  rlm_mschap: Told to do MS-CHAPv2 for taka with NT-Password\u000arlm_mschap: adding MS-CHAPv2 MPPE keys\u000a  modcall[authenticate]: module "mschap" returns ok for request 0\u000amodcall: group Auth-Type returns ok for request 0</pre>\u000a</div>\u000a<p>\u3053\u3053\u3067\u3001\u4ee5\u4e0b\u306e\u4e8c\u884c:</p>\u000a<div class=highlight-python><pre>rlm_mschap: Found LM-Password\u000arlm_mschap: Found NT-Password</pre>\u000a</div>\u000a<p>\u306fLDAP\u304b\u3089\u30a2\u30ab\u30a6\u30f3\u30c8\u78ba\u8a8d\u6642\u306b\u53d6\u5f97\u3057\u3066\u3044\u308b\u5024\u304c\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\u3082\u3057LDAP\u304b\u3089\u53d6\u5f97\u3067\u304d\u3066\u3044\u306a\u3044\u5834\u5408\u3001\u3053\u306e\u90e8\u5206\u306e\u30ed\u30b0\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059:</p>\u000a<div class=highlight-python><pre>rlm_mschap: No User-Password configured.  Cannot create LM-Password.\u000arlm_mschap: No User-Password configured.  Cannot create NT-Password.\u000arlm_mschap: Told to do MS-CHAPv2 for taka with NT-Password</pre>\u000a</div>\u000a<p>\u6700\u521d\u3053\u308c\u3092\u898b\u3066\u3001radius\u306bUser-Password\u3092\u6e21\u3059\u65b9\u6cd5\u3092\u8abf\u3079\u305f\u308a\u3001\u3084\u3063\u3071\u308aLDAP\u5185\u306b\u30d7\u30ec\u30fc\u30f3\u30c6\u30ad\u30b9\u30c8\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u683c\u7d0d\u3059\u308b\u3057\u304b\u306a\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u3001\u3068\u304b\u601d\u3063\u305f\u308a\u3057\u3066\u3044\u307e\u3057\u305f\u3002</p>\u000a<p>\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u5168\u3066\u3046\u307e\u304f\u52d5\u4f5c\u3059\u308b\u3068\u6700\u5f8c\u306b:</p>\u000a<div class=highlight-python><pre>Login OK: [taka] (from client localhost port 0 cli 219.121.60.111)\u000aSending Access-Accept of id 122 to 127.0.0.1:60238\u000a        MS-CHAP2-Success = 0x01533d41324643393538044345373733063439463246024331353330324146423601383431430241303936\u000a        MS-MPPE-Recv-Key = 0x408c031d5390d2c72b140b004f0df5fc\u000a        MS-MPPE-Send-Key = 0x56815e0082a820e2e891bc02aa20628e\u000a        MS-MPPE-Encryption-Policy = 0x00000001\u000a        MS-MPPE-Encryption-Types = 0x00000006\u000aFinished request 0</pre>\u000a</div>\u000a<p>\u3068\u306a\u308a\u3001VPN\u63a5\u7d9a\u304c\u884c\u308f\u308c\u307e\u3059\u3002</p>\u000a<p>\u3042\u3068\u306f\u901a\u5e38\u904b\u7528\u7528\u306b /usr/local/etc/rc.d/radius.sh \u304c\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3001rc.conf \u306b\u4ee5\u4e0b\u3092\u8a18\u8ff0\u3057\u307e\u3059:</p>\u000a<div class=highlight-python><div class=highlight><pre><span class=n>radiusd_enable</span><span class=o>=</span><span class=s>"YES"</span>\u000a</pre></div>\u000a</div>\u000a</div>\u000a<div id=id4 class=section>\u000a<h2>\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8<a class=headerlink href=http://www.freia.jp/taka/blog/83/index.html#id4 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>\u975e\u5e38\u306b\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u3053\u3046\u3044\u3063\u305f\u30b5\u30a4\u30c8\u304c\u7121\u3051\u308c\u3070\u5206\u539a\u3044radius\u306e\u672c\u3068\u683c\u95d8\u3057\u305f\u308a\u3001\u82f1\u8a9e\u306e\u68ee\u306e\u4e2d\u30921\u30f6\u6708\u304f\u3089\u3044\u3055\u307e\u3088\u3063\u3066\u3044\u305f\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u7b46\u8005\u306e\u65b9\u3005\u306b\u6df1\u304f\u304a\u793c\u7533\u3057\u4e0a\u3052\u307e\u3059\u3002</p>\u000a<ul class=simple>\u000a<li><a class="reference external" href=http://www.aineas.net/linux/ldap/radius.php>RADIUS\u306eMS-CHAP\u8a8d\u8a3c\u306bLDAP\u3092\u4f7f\u3046</a> (\u30b7\u30fc\u30b6\u30fc\u30b5\u30e9\u30c0\u3068\u30a8\u30d3\u30ab\u30ec\u30fc\u306e\u65e5\u3005 \u3088\u308a)</li>\u000a<li><a class="reference external" href=http://kozuka.jp/tdiary-blog_html/20030507.html>mpd\u3068FreeRadius(+PostgreSQL)\u306e\u9023\u643a</a> (\u672a\u6574\u7406\u6587\u7ae0/\u30b3\u30e9\u30e0\u306e\u7a2e \u3088\u308a)</li>\u000a<li><a class="reference external" href=http://www.linux.or.jp/JF/JFdocs/LDAP-Implementation-HOWTO/radius.html>LDAP \u3092\u4f7f\u3063\u305f Radius \u8a8d\u8a3c</a> (LDAP Implementation HOWTO \u3088\u308a)</li>\u000a<li><a class="reference external" href=http://www.y-min.or.jp/~nob/FreeBSD/freeradius-openldap.html>freeRADIUS and openldap on FreeBSD</a> (Nob's Home Page \u3088\u308a)</li>\u000a</ul>\u000a</div>\u000a</div>\u000a
p9
sS'unique_id'
p10
g7
sS'title'
p11
V2004/11/23 Windows\u304b\u3089\u306eVPN\u63a5\u7d9a\u8a8d\u8a3c\u3092LDAP\u3067\u7ba1\u7406\u3059\u308b on FreeBSD5.2.1
p12
s.