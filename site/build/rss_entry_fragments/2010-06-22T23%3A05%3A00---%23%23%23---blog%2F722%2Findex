(dp0
S'pubdate'
p1
cdatetime
datetime
p2
(S'\x07\xda\x06\x16\x17\x05\x00\x00\x00\x00'
p3
tp4
Rp5
sS'link'
p6
Vhttp://www.freia.jp/taka/blog/722/index.html
p7
sS'description'
p8
V<div id=setuptoolsplugin-egg class=section>\u000a<h1>2010/06/22 setuptools\u3092\u4f7f\u3063\u305fplugin\u30b5\u30f3\u30d7\u30eb(egg\u7de8)<a class=headerlink href=http://www.freia.jp/taka/blog/722/index.html#setuptoolsplugin-egg title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h1>\u000a<p><em>Category: 'python'</em></p>\u000a<p><a class="reference external" href=http://www.freia.jp/taka/blog/721>setuptools\u3092\u4f7f\u3063\u305fplugin\u30b5\u30f3\u30d7\u30eb</a> \u3067\u4f5c\u3063\u305fplugin\u306e\u4ed5\u7d44\u307f\u3092\u000a\u3061\u3087\u3063\u3068\u3060\u3051\u5909\u66f4\u3057\u3066\u3001plugin\u7528\u30d5\u30a9\u30eb\u30c0\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u305f\u3089\u000aplugin\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002</p>\u000a<p>\u3053\u3053\u3067\u3001plugin\u30d5\u30a1\u30a4\u30eb\u306e\u5f62\u5f0f\u3068\u3057\u3066egg\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u307e\u3059\u3002</p>\u000a<div id=id1 class=section>\u000a<h2>\u524d\u6e96\u5099<a class=headerlink href=http://www.freia.jp/taka/blog/722/index.html#id1 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>Python\u74b0\u5883\u306bsetuptools\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u000a\u624b\u9806\u306f\u524d\u306e\u30a8\u30f3\u30c8\u30ea <a class="reference external" href=http://www.freia.jp/taka/blog/721>setuptools\u3092\u4f7f\u3063\u305fplugin\u30b5\u30f3\u30d7\u30eb</a> \u3092\u53c2\u7167\u306e\u3053\u3068\u3002</p>\u000a<p>\u6b21\u306b <a class="reference external" href=http://www.freia.jp/taka/blog/stuff/plugins_egg.zip/download>plugins_egg.zip</a> \u3092\u5c55\u958b\u3057\u307e\u3059:</p>\u000a<div class=highlight-python><pre>plugins_egg/\u000a   +-- README.txt\u000a   +---p1/\u000a   |   +-- foo_plugin.py\u000a   |   +-- setup.py\u000a   |\u000a   +---p2/\u000a   |   +-- bar_plugin.py\u000a   |   +-- setup.py\u000a   |\u000a   +---server/\u000a       +-- server.py\u000a       +-- plugins/</pre>\u000a</div>\u000a</div>\u000a<div id=pluginegg class=section>\u000a<h2>plugin\u3092egg\u5316\u3057\u3066\u8ffd\u52a0<a class=headerlink href=http://www.freia.jp/taka/blog/722/index.html#pluginegg title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>p1\u30d5\u30a9\u30eb\u30c0\u3067plugin\u3092egg\u5316\u3057\u307e\u3059\u3002</p>\u000a<div class="dos topic">\u000a<p class="topic-title first">bdist_egg</p>\u000a<div class=line-block>\u000a<div class=line>$ cd ../p1</div>\u000a<div class=line>$ python setup.py bdist_egg</div>\u000a<div class=line>running bdist_egg</div>\u000a<div class=line>running egg_info</div>\u000a<div class=line>...</div>\u000a<div class=line>...</div>\u000a<div class=line>creating dist</div>\u000a<div class=line>creating 'dist/foo_plugin-0.0.0-py2.6.egg' ...</div>\u000a<div class=line>removing 'build/bdist.xxx/egg' (and everything under it)</div>\u000a<div class=line><br></div>\u000a<div class=line>$</div>\u000a</div>\u000a</div>\u000a<p>\u3053\u308c\u3067dist\u30d5\u30a9\u30eb\u30c0\u306begg\u30d5\u30a1\u30a4\u30eb\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u306e\u000afoo_plugin-0.0.0-py2.6.egg \u3092server/plugins\u30d5\u30a9\u30eb\u30c0\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002</p>\u000a<div class="dos topic">\u000a<p class="topic-title first">install</p>\u000a<div class=line-block>\u000a<div class=line>$ ls dist</div>\u000a<div class=line>foo_plugin-0.0.0-py2.6.egg</div>\u000a<div class=line>$ mv dist/* ../server/plugins</div>\u000a</div>\u000a</div>\u000a</div>\u000a<div id=server class=section>\u000a<h2>server\u3092\u5b9f\u884c<a class=headerlink href=http://www.freia.jp/taka/blog/722/index.html#server title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>'server' \u30d5\u30a9\u30eb\u30c0\u306b\u79fb\u52d5\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u884c\u3057\u307e\u3059\u3002</p>\u000a<div class="dos topic">\u000a<p class="topic-title first">run</p>\u000a<div class=line-block>\u000a<div class=line>$ cd ../server</div>\u000a<div class=line>$ python server.py</div>\u000a<div class=line>## call plugin: plugin:plugin_name1</div>\u000a<div class=line>Hello SERVER (by foo_plugin)</div>\u000a<div class=line><br></div>\u000a<div class=line>## plugins call finished</div>\u000a<div class=line><br></div>\u000a<div class=line>$</div>\u000a</div>\u000a</div>\u000a</div>\u000a<div id=plugin class=section>\u000a<h2>plugin\u306e\u4ed5\u7d44\u307f<a class=headerlink href=http://www.freia.jp/taka/blog/722/index.html#plugin title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>plugin\u5074\u306e\u30b3\u30fc\u30c9\u306f\u524d\u56de\u306e <a class="reference external" href=http://www.freia.jp/taka/blog/721>setuptools\u3092\u4f7f\u3063\u305fplugin\u30b5\u30f3\u30d7\u30eb</a> \u3067\u7528\u610f\u3057\u305f\u3082\u306e\u3068\u000a\u5b8c\u5168\u306b\u540c\u3058\u3067\u3001plugin\u3092\u4f7f\u3046server.py\u5074\u306e\u30b3\u30fc\u30c9\u3092\u3061\u3087\u3063\u3068\u3060\u3051\u5909\u66f4\u3057\u307e\u3057\u305f\u3002</p>\u000a<p>server.py\u3067\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u306e\u4f8b\u306e\u3088\u3046\u306b\u3001plugins\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u8eab\u3092\u81ea\u52d5\u7684\u306b\u000asys.path\u306b\u8ffd\u52a0\u3057\u3066\u304b\u3089pkg_resources\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002</p>\u000a<div class=highlight-python><div class=highlight><pre><span class=kn>import</span> <span class=nn>sys</span>\u000a<span class=kn>from</span> <span class=nn>glob</span> <span class=kn>import</span> <span class=n>glob</span>\u000a\u000a<span class=n>sys</span><span class=o>.</span><span class=n>path</span><span class=p>[</span><span class=mi>0</span><span class=p>:</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>glob</span><span class=p>(</span><span class=s>'plugins/*.egg'</span><span class=p>)</span>\u000a\u000a<span class=kn>import</span> <span class=nn>pkg_resources</span>\u000a<span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=n>pkg_resources</span><span class=o>.</span><span class=n>iter_entry_points</span><span class=p>(</span><span class=s>'plugin_example'</span><span class=p>):</span>\u000a    <span class=o>...</span>\u000a</pre></div>\u000a</div>\u000a<p>\u4e0a\u8a18\u306f <cite>import pkg_resources</cite> \u3059\u308b\u3068\u5185\u90e8\u3067sys.path\u3092\u8d70\u67fb\u3059\u308b\u4f5c\u308a\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u306b\u3053\u306e\u3088\u3046\u306a\u624b\u9806\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u3042\u308b\u3044\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304f\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002</p>\u000a<div class=highlight-python><div class=highlight><pre><span class=kn>import</span> <span class=nn>sys</span>\u000a<span class=kn>from</span> <span class=nn>glob</span> <span class=kn>import</span> <span class=n>glob</span>\u000a<span class=kn>import</span> <span class=nn>pkg_resources</span>\u000a\u000a<span class=k>for</span> <span class=n>p</span> <span class=ow>in</span> <span class=n>glob</span><span class=p>(</span><span class=s>'plugins/*.egg'</span><span class=p>):</span>\u000a    <span class=n>pkg_resources</span><span class=o>.</span><span class=n>working_set</span><span class=o>.</span><span class=n>add_entry</span><span class=p>(</span><span class=n>p</span><span class=p>)</span>\u000a\u000a<span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=n>pkg_resources</span><span class=o>.</span><span class=n>iter_entry_points</span><span class=p>(</span><span class=s>'plugin_example'</span><span class=p>):</span>\u000a    <span class=o>...</span>\u000a</pre></div>\u000a</div>\u000a<p>\uff086/26\u8ffd\u8a18\uff09\u3055\u3089\u306bpkg_resources.py\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3082\u3042\u308a\u307e\u3059\u3002</p>\u000a<div class=highlight-python><div class=highlight><pre><span class=kn>import</span> <span class=nn>sys</span>\u000a<span class=kn>import</span> <span class=nn>pkg_resources</span>\u000a\u000a<span class=n>distributions</span><span class=p>,</span> <span class=n>errors</span> <span class=o>=</span> <span class=n>pkg_resources</span><span class=o>.</span><span class=n>working_set</span><span class=o>.</span><span class=n>find_plugins</span><span class=p>(</span>\u000a    <span class=n>pkg_resources</span><span class=o>.</span><span class=n>Environment</span><span class=p>([</span><span class=s>'plugins'</span><span class=p>])</span>\u000a<span class=p>)</span>\u000a<span class=nb>map</span><span class=p>(</span><span class=n>pkg_resources</span><span class=o>.</span><span class=n>working_set</span><span class=o>.</span><span class=n>add</span><span class=p>,</span> <span class=n>distributions</span><span class=p>)</span>\u000a\u000a<span class=k>for</span> <span class=n>plugin</span> <span class=ow>in</span> <span class=n>pkg_resources</span><span class=o>.</span><span class=n>iter_entry_points</span><span class=p>(</span><span class=s>'plugin_example'</span><span class=p>):</span>\u000a    <span class=o>...</span>\u000a</pre></div>\u000a</div>\u000a<p>\u3053\u308c\u306a\u3089sys.path\u3082\u6c5a\u3055\u306a\u3044\u3067\u3059\u306d\u3002</p>\u000a</div>\u000a<div id=id2 class=section>\u000a<h2>\u5f8c\u59cb\u672b<a class=headerlink href=http://www.freia.jp/taka/blog/722/index.html#id2 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p>\u4eca\u56de\u306fplugin\u3092\u30b7\u30b9\u30c6\u30e0\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u8a33\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u5f8c\u59cb\u672b\u306f\u000a\u7279\u306b\u5fc5\u8981\u3042\u308a\u307e\u305b\u3093\u3002</p>\u000a</div>\u000a<div id=id3 class=section>\u000a<h2>\u307e\u3068\u3081<a class=headerlink href=http://www.freia.jp/taka/blog/722/index.html#id3 title=\u3053\u306e\u30d8\u30c3\u30c9\u30e9\u30a4\u30f3\u3078\u306e\u30d1\u30fc\u30de\u30ea\u30f3\u30af></a></h2>\u000a<p><a class="reference external" href=http://www.freia.jp/taka/blog/721>setuptools\u3092\u4f7f\u3063\u305fplugin\u30b5\u30f3\u30d7\u30eb</a> \u3067\u8aac\u660e\u3057\u305f\u65b9\u6cd5\u3068\u6bd4\u3079\u3066\u3001plugins\u30d5\u30a9\u30eb\u30c0\u000a\u306begg\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u3044\u305f\u308a\u30d7\u30ed\u30b0\u30e9\u30e0\u3067plugins\u30d5\u30a9\u30eb\u30c0\u3092sys.path\u306b\u8ffd\u52a0\u3057\u305f\u308a\u3068\u000a\u624b\u52d5\u3067\u306e\u7ba1\u7406\u304c\u5897\u3048\u3066\u304a\u308a\u3001easy_install\u3067\u81ea\u52d5\u7684\u306b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8ffd\u52a0\u3059\u308b\u306a\u3069\u000a\u306e\u65b9\u6cd5\u306f\u4f7f\u3048\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u3057\u304b\u3057\u3053\u308c\u306f\u3053\u308c\u3067\u4f7f\u3044\u65b9\u306b\u3088\u3063\u3066\u306f\u000a\u30e1\u30ea\u30c3\u30c8\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002</p>\u000a<p>\u3061\u306a\u307f\u306b\u3001egg\u30d5\u30a1\u30a4\u30eb\u306f\u5b9f\u306fzip\u30d5\u30a1\u30a4\u30eb\u3060\u3068\u304b\u3001python\u306fzip\u5727\u7e2e\u3055\u308c\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u000a\u3092sys.path\u306b\u8ffd\u52a0\u3057\u3066\u304a\u3051\u3070import\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u304b\u3001\u8272\u3005\u306a\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u000a\u306e\u4e0a\u3067\u3053\u306e\u4ed5\u7d44\u307f\u306f\u52d5\u4f5c\u3057\u3066\u3044\u307e\u3059\u3002</p>\u000a<p>\u306a\u304a\u3001buildout\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001buildout.cfg\u306e\u8a2d\u5b9a\u3092\u66f8\u304d\u63db\u3048\u308b\u3060\u3051\u3067plugin\u000a\u3068\u306a\u308begg\u3092\u81ea\u52d5\u7684\u306bPyPI\u304b\u3089\u53d6\u3063\u3066\u304d\u3066\u30b7\u30b9\u30c6\u30e0\u306b\u7d44\u307f\u8fbc\u3080\u3068\u8a00\u3046\u3088\u3046\u306a\u000a\u4ed5\u7d44\u307f\u3092\u4f5c\u308b\u3053\u3068\u3082\u7c21\u5358\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002</p>\u000a<dl class=docutils>\u000a<dt>\u53c2\u8003\u6587\u732e:</dt>\u000a<dd><ul class="first last">\u000a<li><dl class="first docutils">\u000a<dt>[Python] setuptools - SumiTomohiko\u306e\u65e5\u8a18</dt>\u000a<dd><ul class="first last simple">\u000a<li><a class="reference external" href=http://d.hatena.ne.jp/SumiTomohiko/20070622>http://d.hatena.ne.jp/SumiTomohiko/20070622</a></li>\u000a<li><a class="reference external" href=http://d.hatena.ne.jp/SumiTomohiko/20070623>http://d.hatena.ne.jp/SumiTomohiko/20070623</a></li>\u000a<li><a class="reference external" href=http://d.hatena.ne.jp/SumiTomohiko/20070624>http://d.hatena.ne.jp/SumiTomohiko/20070624</a></li>\u000a</ul>\u000a</dd>\u000a</dl>\u000a</li>\u000a<li><p class=first><a class="reference external" href=http://astore.amazon.co.jp/freiaweb-22/detail/4048686291>\u30a8\u30ad\u30b9\u30d1\u30fc\u30c8Python\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0</a></p>\u000a</li>\u000a</ul>\u000a</dd>\u000a</dl>\u000a</div>\u000a</div>\u000a
p9
sS'unique_id'
p10
g7
sS'title'
p11
V2010/06/22 setuptools\u3092\u4f7f\u3063\u305fplugin\u30b5\u30f3\u30d7\u30eb(egg\u7de8)
p12
s.