:date: 2008-03-02 23:01:35
:categories: ['IT-PC']
:body type: text/x-rst

=======================================
2008/03/02 VistaでVMWare Serverが固まる
=======================================

*Category: 'IT-PC'*

最近忙しくて2/18以来半月ぶりのblog更新です。

来週のPythonキャンプに向けてbuildbot/SeleniumRC/Tracのデモ環境を用意しようとVMWareにWindowsXPとUbuntu7 Desktop, Server の３つのOSをセットアップしたのですが、HostであるVistaを再起動したあとに起動しようとしたらHDDにアクセスしっぱなしになり20分後くらいにWatchDocTimerか何かでOSがリブートしました（泣

以前にも同じ事があったので、何か情報はないかとGoogle検索してみたところ、以下の記事がヒット。

.. Highlights::

  1. 仮想マシンの Advanced オプションで disable memory page timing にチェックをいれる。

  2. 仮想マシンの環境設定ファイル .vmx に mainMem.useNamedFile = "FALSE" の１行を加える。

  -- `VMware が頻繁にディスクアクセスして OS 全体が固まる件`_

これだ！と思い、設定してVMWareのGuestOSを起動したら、さっきと同じように固まってしまいました...（大泣  で、HDDアクセスから帰ってきてくれるかもしれないと思いつつ待ってる間暇なのでこのエントリを書いてます。今10分ちょっと経過。

ところで、以前同じ現象に遭遇した際は数分間固まった後で復活した後はどのVMもすぐに起動するようになったので、もしかしたら一度起動すればそのあとは平気になるのかもしれません。そういう理由なのかどうか分かりませんが、今日の昼間にデモ環境セットアップしようと起動したときには数十秒固まったものの起動できたのですが、もしかしたら新規作成したVMのGuestだったからなのかもしれません。前述の記事によると、GuestOS用に仮想メモリを使うために仮想メモリファイルへの書き込みが頻繁に行われ...ということだったので、メモリ1MBくらいの仮想マシンを用意してこれを最初に起動するようにすればうまくいくかも。


ところで、放置していたHostOSは15分くらいの時点でHDDアクセスが止まって、ブルースクリーンになりました。 NO_PAGES だって。

.. _`VMware が頻繁にディスクアクセスして OS 全体が固まる件`: http://www.drk7.jp/MT/archives/001215.html


.. :extend type: text/html
.. :extend:


.. :comments:
.. :comment id: 2008-06-03.5466585459
.. :title: Re:VistaでVMWare Serverが固まる
.. :author: ukky
.. :date: 2008-06-03 17:25:47
.. :email: ukichon@gmail.com
.. :url: 
.. :body:
.. 私も同じ症状で困っていました。
.. 記事をみてなるほどと思い、ダミーの仮想OSから起動させるのを試してみました。メモリは最低が4MBからだったので1MBにはできませんでした。
.. 仮想OSを作ってからそちらを起動したら・・・以前と同様にHDDのアクセスランプつきっぱなしになって15分ほど何も操作できなくなりました。
.. ちなみに私の環境はVista Ultimate、Core2Duo T9300、4GBRAMです。次の手段としてはVmserver2.0が出たそうなのでそちらに切り替えてみることです。
.. 
.. :comments:
.. :comment id: 2008-06-04.9749461492
.. :title: Re:VistaでVMWare Serverが固まる
.. :author: しみずかわ
.. :date: 2008-06-04 23:49:36
.. :email: 
.. :url: 
.. :body:
.. コメントどうもです(^^
.. こちらも未だに改善できず。実験のたびにBlueScreenを見ることになるのでなかなか・・・。
.. 最近はGoogle等で、対策がうまくいった例が多く引っかかる様になってきたので、もうちょっと頑張れば何とかなるのかも？
.. 
.. VMWare 2.0はまだちょっと恐いな。
.. 
.. :comments:
.. :comment id: 2008-06-06.7645271929
.. :title: Re:VistaでVMWare Serverが固まる
.. :author: ukky
.. :date: 2008-06-06 13:16:09
.. :email: ukichon@gmail.com
.. :url: 
.. :body:
.. Vmserver2.0入れてみました。Consoleが専用アプリではなくブラウザのUIらしいです。
.. インストールできたのですがホスト起動時に「vmware-hostd が停止しました」というエラーが起きます。
.. インストール後にデスクトップにできるショートカットアイコンは1.0.5のときはConsoleの起動でしたが、
.. 2.0ではブラウザが立ち上がってローカル内のどこかにアクセスしようとするのですがページが表示できません。とのこと。
.. 結局何もできず、今度はVMplayerを試してみました。
.. VMplayerだとホストが停止することなく仮想OSを起動できました。
.. しかし仮想イメージの種類によってエラーが起きて起動できないものもありました。
.. はっきりしてませんが、Vistaで使用していた仮想イメージはエラーがでて、以前作ってあった仮想イメージだと起動できた感じです。
.. 結局気持ち悪くて1.0.5に戻しました。
.. でもこんなことを繰り返していて自分のマシンに不信感を感じ、結局マシン自体リカバリーしてしまいました。
.. 
.. ちなみにこんなサイトを見つけました。
.. http://jp.brothersoft.com/downloads-vista-vmware-server.html
.. ここを見ると、1.0.3がVistaに対応しているように書いてあるんですが真偽はわかりません。
.. ホストOSとしての対応状況が明記されていれば、Vistaに対応しているものを入れたいのですが・・・
.. マシンも綺麗になったので1.0.3を入れようかなと思っているのですが。
.. この辺の知識が薄くたいした情報にならずすみません。
