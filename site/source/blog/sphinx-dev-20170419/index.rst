:date: 2017-04-19 23:55
:tags: Sphinx

===============================================================
Sphinx-1.6リリースに向けた開発 hack-a-thon #sphinxjp
===============================================================

Sphinx-1.6b1 のリリースに向けた開発作業をやってきました。

今日の開発hack-a-thonに参加したのは @tk0miya, @shibu_jp, @shimizukawa です。
Sphinxのコミッター3人衆。

.. figure:: dev-scene.*
   :width: 500

   Sphinx の Issue & PR やっつけ中

`チケット#3586`_ にあるとおり、今週末くらいに1.6b1をリリースする予定で作業を進めています。自分はここしばらくSphinxにあまりコミットできていなくて、ほとんどを @tk0miya が進めている感じですが、今日の開発hack-a-thonでは1.6b1向けのautodocまわりのPRの取り込みなどをやりました。

今日みたPRのひとつ `#3623`_ に、Cythonの関数オブジェクトが ``isinstance(obj, FunctionType)`` でTrueにならないので ``obj.__code__`` の有無で関数とみなそうというのがあって、しばらく検討した結果、これは取り込まないことにしました。この方、Python本家の方にもCythonの関数オブジェクトが ``inspect.isfunction`` で判定できてないというのを報告していますが、 ``obj.__code__`` で判別する提案をして、反論等がでていてまだ議論が終わっていない状態です。そんな状態のコードを取り込むとあとで苦労しそうなので却下しました。こういうとき、どうやって断るかとか難しいですね。壊れやすい抜け道を通すようなコードのメンテナンスを引き受けたくないというのが本音だけど、むげにせず、論理的に説明するのがけっこう大変。（その後、シンプルなPRを出し直してくれたので、それは取り込めそう。）

@shibu_jp はepubまわりのHTML5化、 @tk0miya はリモート画像の埋め込みを正しく行うための実装を進めました。

明日も開発hack-a-thonをやる予定です。

.. _チケット#3586: https://github.com/sphinx-doc/sphinx/issues/3586
.. _#3623: https://github.com/sphinx-doc/sphinx/pull/3623


おまけ
========

ルノアール飯田橋西口店は、お客さんが少なかった。一応分煙になってるけど、うっすらとタバコのにおいが...。

別のテーブルからは、「Scalaが、Pythonが、機械学習が、・・」という転職エージェントの会話が聞こえてきたりしてた。良いところに転職したい感を出すより、今のところで十分満足してるけど・・みたいなほうが、長く会社にとどまってくれる感じがして良いらしい。そうなんだー


